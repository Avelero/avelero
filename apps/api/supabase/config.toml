project_id = "create-v1"

[api]
enabled = true
port = 54321
schemas = ["public", "storage"]
extra_search_path = ["public"]
max_rows = 100

[auth]
site_url = "env(APP_URL)"
# Redirect URLs where Supabase can send users after auth
# Format: APP_URL/auth/callback (your Next.js callback handler)
additional_redirect_urls = [
  "env(APP_URL)/auth/callback",
  "env(ADDITIONAL_REDIRECT_URL)/auth/callback",
  # Local development URLs
  "http://localhost:3000/auth/callback",
  "http://127.0.0.1:3000/auth/callback"
]
jwt_expiry = 36000

[auth.hook.send_email]
enabled = true
uri = "env(SEND_EMAIL_HOOK_URI)"
secrets = "env(SEND_EMAIL_HOOK_SECRET)"

[auth.hook.before_user_created]
enabled = true
uri = "pg-functions://postgres/public/before_user_created_invite_gate"

[functions.send-email]
verify_jwt = false

[db]
port = 54322

[studio]
port = 54323

[auth.external.google]
enabled = true
client_id = "env(GOOGLE_CLIENT_ID)"
secret = "env(GOOGLE_SECRET)"
# IMPORTANT: This is where GOOGLE redirects to SUPABASE (not your app!)
# Format: SUPABASE_URL/auth/v1/callback
# - Production (with custom domain): https://auth.avelero.com/auth/v1/callback
# - Preview (dynamic): https://<branch-ref>.supabase.co/auth/v1/callback
# - Local development: http://localhost:54321/auth/v1/callback
redirect_uri = "env(GOOGLE_REDIRECT_URI)"

[analytics]
enabled = true
port = 54327
vector_port = 54328
backend = "postgres"
