{
  "id": "711a831c-9ef5-459d-8587-f391bc3897bd",
  "prevId": "3de0d0e3-6fc8-46a6-9cf7-1e52031f58c9",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "full_name": {
          "name": "full_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_path": {
          "name": "avatar_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_hue": {
          "name": "avatar_hue",
          "type": "smallint",
          "primaryKey": false,
          "notNull": false
        },
        "role": {
          "name": "role",
          "type": "user_role",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'member'"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_users_brand_id": {
          "name": "idx_users_brand_id",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "where": "(brand_id IS NOT NULL)",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "users_id_users_id_fk": {
          "name": "users_id_users_id_fk",
          "tableFrom": "users",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": ["id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_email_key": {
          "name": "users_email_key",
          "nullsNotDistinct": false,
          "columns": ["email"]
        }
      },
      "policies": {
        "users_select_own_profile": {
          "name": "users_select_own_profile",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "auth.uid() = id"
        },
        "users_select_for_brand_members": {
          "name": "users_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "shares_brand_with(id)"
        },
        "users_update_own_profile": {
          "name": "users_update_own_profile",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "auth.uid() = id",
          "withCheck": "\n        auth.uid() = id\n        AND (\n          brand_id IS NULL\n          OR EXISTS (\n            SELECT 1\n            FROM users_on_brand uob\n            WHERE uob.brand_id = brand_id\n              AND uob.user_id = auth.uid()\n          )\n        )\n      "
        },
        "users_insert_own_profile": {
          "name": "users_insert_own_profile",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "auth.uid() = id"
        }
      },
      "checkConstraints": {
        "users_avatar_hue_check": {
          "name": "users_avatar_hue_check",
          "value": "(avatar_hue IS NULL) OR ((avatar_hue >= 1) AND (avatar_hue <= 360))"
        }
      },
      "isRLSEnabled": false
    },
    "public.brands": {
      "name": "brands",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "country_code": {
          "name": "country_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "logo_path": {
          "name": "logo_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_hue": {
          "name": "avatar_hue",
          "type": "smallint",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_brands_email": {
          "name": "idx_brands_email",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_brands_avatar_hue": {
          "name": "idx_brands_avatar_hue",
          "columns": [
            {
              "expression": "avatar_hue",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "int2_ops"
            }
          ],
          "isUnique": false,
          "where": "(avatar_hue IS NOT NULL)",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brands_update_by_member": {
          "name": "brands_update_by_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(id)"
        },
        "brands_delete_by_owner": {
          "name": "brands_delete_by_owner",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_owner(id)"
        },
        "brands_select_for_invite_recipients": {
          "name": "brands_select_for_invite_recipients",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"]
        },
        "brands_select_for_members": {
          "name": "brands_select_for_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(id)"
        },
        "brands_insert_by_authenticated": {
          "name": "brands_insert_by_authenticated",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {
        "brands_avatar_hue_check": {
          "name": "brands_avatar_hue_check",
          "value": "(avatar_hue IS NULL) OR ((avatar_hue >= 1) AND (avatar_hue <= 360))"
        }
      },
      "isRLSEnabled": false
    },
    "public.users_on_brand": {
      "name": "users_on_brand",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ux_users_on_brand_user_brand": {
          "name": "ux_users_on_brand_user_brand",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_users_on_brand_brand_id": {
          "name": "idx_users_on_brand_brand_id",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_users_on_brand_user_id": {
          "name": "idx_users_on_brand_user_id",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "users_on_brand_user_id_users_id_fk": {
          "name": "users_on_brand_user_id_users_id_fk",
          "tableFrom": "users_on_brand",
          "tableTo": "users",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "users_on_brand_brand_id_brands_id_fk": {
          "name": "users_on_brand_brand_id_brands_id_fk",
          "tableFrom": "users_on_brand",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_on_brand_user_id_brand_id_key": {
          "name": "users_on_brand_user_id_brand_id_key",
          "nullsNotDistinct": false,
          "columns": ["user_id", "brand_id"]
        }
      },
      "policies": {
        "users_on_brand_update_by_owner": {
          "name": "users_on_brand_update_by_owner",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_owner(brand_id)"
        },
        "users_on_brand_select_for_members": {
          "name": "users_on_brand_select_for_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "users_on_brand_delete_self": {
          "name": "users_on_brand_delete_self",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        },
        "users_on_brand_delete_owner_non_owner": {
          "name": "users_on_brand_delete_owner_non_owner",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        },
        "users_on_brand_insert_first_owner_self": {
          "name": "users_on_brand_insert_first_owner_self",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {
        "users_on_brand_role_check": {
          "name": "users_on_brand_role_check",
          "value": "role = ANY (ARRAY['owner'::text, 'member'::text])"
        }
      },
      "isRLSEnabled": false
    },
    "public.brand_invites": {
      "name": "brand_invites",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "token_hash": {
          "name": "token_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_brand_invites_brand_id": {
          "name": "idx_brand_invites_brand_id",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_brand_invites_expires_at": {
          "name": "idx_brand_invites_expires_at",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_brand_invites_token_hash": {
          "name": "idx_brand_invites_token_hash",
          "columns": [
            {
              "expression": "token_hash",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_brand_invites_valid_lookup": {
          "name": "idx_brand_invites_valid_lookup",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_brand_invites_email": {
          "name": "idx_brand_invites_email",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_brand_invites_email_expires": {
          "name": "idx_brand_invites_email_expires",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            },
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ux_brand_invites_token_hash_not_null": {
          "name": "ux_brand_invites_token_hash_not_null",
          "columns": [
            {
              "expression": "token_hash",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": true,
          "where": "(token_hash IS NOT NULL)",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "brand_invites_brand_id_brands_id_fk": {
          "name": "brand_invites_brand_id_brands_id_fk",
          "tableFrom": "brand_invites",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_invites_update_by_owner": {
          "name": "brand_invites_update_by_owner",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_owner(brand_id)"
        },
        "brand_invites_insert_by_owner": {
          "name": "brand_invites_insert_by_owner",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_owner(brand_id)"
        },
        "brand_invites_delete_by_owner": {
          "name": "brand_invites_delete_by_owner",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_owner(brand_id)"
        },
        "brand_invites_select_for_recipient": {
          "name": "brand_invites_select_for_recipient",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"]
        },
        "brand_invites_delete_by_recipient": {
          "name": "brand_invites_delete_by_recipient",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        },
        "brand_invites_select_for_members": {
          "name": "brand_invites_select_for_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {
        "brand_invites_role_check": {
          "name": "brand_invites_role_check",
          "value": "role = ANY (ARRAY['owner'::text, 'member'::text])"
        }
      },
      "isRLSEnabled": false
    },
    "public.temp": {
      "name": "temp",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.categories": {
      "name": "categories",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "parent_id": {
          "name": "parent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "categories_parent_name_unq": {
          "name": "categories_parent_name_unq",
          "columns": [
            {
              "expression": "parent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "categories_parent_id_idx": {
          "name": "categories_parent_id_idx",
          "columns": [
            {
              "expression": "parent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "categories_parent_id_categories_id_fk": {
          "name": "categories_parent_id_categories_id_fk",
          "tableFrom": "categories",
          "tableTo": "categories",
          "columnsFrom": ["parent_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "categories_select_for_authenticated": {
          "name": "categories_select_for_authenticated",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "true"
        },
        "categories_modify_system_only": {
          "name": "categories_modify_system_only",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["authenticated", "service_role"],
          "using": "false",
          "withCheck": "false"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_certifications": {
      "name": "brand_certifications",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "certification_code": {
          "name": "certification_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "institute_name": {
          "name": "institute_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "institute_address": {
          "name": "institute_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "institute_contact": {
          "name": "institute_contact",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "issue_date": {
          "name": "issue_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "expiry_date": {
          "name": "expiry_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "file_asset_id": {
          "name": "file_asset_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "external_url": {
          "name": "external_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "brand_certifications_brand_id_brands_id_fk": {
          "name": "brand_certifications_brand_id_brands_id_fk",
          "tableFrom": "brand_certifications",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "brand_certifications_file_asset_id_file_assets_id_fk": {
          "name": "brand_certifications_file_asset_id_file_assets_id_fk",
          "tableFrom": "brand_certifications",
          "tableTo": "file_assets",
          "columnsFrom": ["file_asset_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_certifications_select_for_brand_members": {
          "name": "brand_certifications_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_certifications_insert_by_brand_member": {
          "name": "brand_certifications_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_certifications_update_by_brand_member": {
          "name": "brand_certifications_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_certifications_delete_by_brand_member": {
          "name": "brand_certifications_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_collections": {
      "name": "brand_collections",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "filter": {
          "name": "filter",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "brand_collections_brand_name_unq": {
          "name": "brand_collections_brand_name_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "brand_collections_brand_id_brands_id_fk": {
          "name": "brand_collections_brand_id_brands_id_fk",
          "tableFrom": "brand_collections",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_collections_select_for_brand_members": {
          "name": "brand_collections_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_collections_insert_by_brand_member": {
          "name": "brand_collections_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_collections_update_by_brand_member": {
          "name": "brand_collections_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_collections_delete_by_brand_member": {
          "name": "brand_collections_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_colors": {
      "name": "brand_colors",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "hex": {
          "name": "hex",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "brand_colors_brand_name_unq": {
          "name": "brand_colors_brand_name_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "brand_colors_brand_id_brands_id_fk": {
          "name": "brand_colors_brand_id_brands_id_fk",
          "tableFrom": "brand_colors",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_colors_select_for_brand_members": {
          "name": "brand_colors_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_colors_insert_by_brand_member": {
          "name": "brand_colors_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_colors_update_by_brand_member": {
          "name": "brand_colors_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_colors_delete_by_brand_member": {
          "name": "brand_colors_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_eco_claims": {
      "name": "brand_eco_claims",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "claim": {
          "name": "claim",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "brand_eco_claims_brand_claim_unq": {
          "name": "brand_eco_claims_brand_claim_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "claim",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "brand_eco_claims_brand_id_brands_id_fk": {
          "name": "brand_eco_claims_brand_id_brands_id_fk",
          "tableFrom": "brand_eco_claims",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_eco_claims_select_for_brand_members": {
          "name": "brand_eco_claims_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_eco_claims_insert_by_brand_member": {
          "name": "brand_eco_claims_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_eco_claims_update_by_brand_member": {
          "name": "brand_eco_claims_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_eco_claims_delete_by_brand_member": {
          "name": "brand_eco_claims_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_facilities": {
      "name": "brand_facilities",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "display_name": {
          "name": "display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "legal_name": {
          "name": "legal_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "website": {
          "name": "website",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address_line_1": {
          "name": "address_line_1",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address_line_2": {
          "name": "address_line_2",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "city": {
          "name": "city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "state": {
          "name": "state",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "zip": {
          "name": "zip",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "country_code": {
          "name": "country_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "brand_facilities_brand_id_brands_id_fk": {
          "name": "brand_facilities_brand_id_brands_id_fk",
          "tableFrom": "brand_facilities",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_facilities_select_for_brand_members": {
          "name": "brand_facilities_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_facilities_insert_by_brand_member": {
          "name": "brand_facilities_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_facilities_update_by_brand_member": {
          "name": "brand_facilities_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_facilities_delete_by_brand_member": {
          "name": "brand_facilities_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_materials": {
      "name": "brand_materials",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "certification_id": {
          "name": "certification_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "recyclable": {
          "name": "recyclable",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "country_of_origin": {
          "name": "country_of_origin",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "brand_materials_brand_id_brands_id_fk": {
          "name": "brand_materials_brand_id_brands_id_fk",
          "tableFrom": "brand_materials",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "brand_materials_certification_id_brand_certifications_id_fk": {
          "name": "brand_materials_certification_id_brand_certifications_id_fk",
          "tableFrom": "brand_materials",
          "tableTo": "brand_certifications",
          "columnsFrom": ["certification_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_materials_select_for_brand_members": {
          "name": "brand_materials_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_materials_insert_by_brand_member": {
          "name": "brand_materials_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_materials_update_by_brand_member": {
          "name": "brand_materials_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_materials_delete_by_brand_member": {
          "name": "brand_materials_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_seasons": {
      "name": "brand_seasons",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "start_date": {
          "name": "start_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "end_date": {
          "name": "end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "ongoing": {
          "name": "ongoing",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "brand_seasons_brand_name_unq": {
          "name": "brand_seasons_brand_name_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "brand_seasons_brand_id_brands_id_fk": {
          "name": "brand_seasons_brand_id_brands_id_fk",
          "tableFrom": "brand_seasons",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_seasons_select_for_brand_members": {
          "name": "brand_seasons_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_seasons_insert_by_brand_members": {
          "name": "brand_seasons_insert_by_brand_members",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_seasons_update_by_brand_members": {
          "name": "brand_seasons_update_by_brand_members",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_seasons_delete_by_brand_members": {
          "name": "brand_seasons_delete_by_brand_members",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_services": {
      "name": "brand_services",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "service_url": {
          "name": "service_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "brand_services_brand_name_unq": {
          "name": "brand_services_brand_name_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "brand_services_brand_id_brands_id_fk": {
          "name": "brand_services_brand_id_brands_id_fk",
          "tableFrom": "brand_services",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_services_select_for_brand_members": {
          "name": "brand_services_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_services_insert_by_brand_member": {
          "name": "brand_services_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_services_update_by_brand_member": {
          "name": "brand_services_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_services_delete_by_brand_member": {
          "name": "brand_services_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_sizes": {
      "name": "brand_sizes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "sort_index": {
          "name": "sort_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "category_id": {
          "name": "category_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "brand_sizes_brand_name_unq": {
          "name": "brand_sizes_brand_name_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "category_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "brand_sizes_brand_id_brands_id_fk": {
          "name": "brand_sizes_brand_id_brands_id_fk",
          "tableFrom": "brand_sizes",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "brand_sizes_category_id_categories_id_fk": {
          "name": "brand_sizes_category_id_categories_id_fk",
          "tableFrom": "brand_sizes",
          "tableTo": "categories",
          "columnsFrom": ["category_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_sizes_select_for_brand_members": {
          "name": "brand_sizes_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_sizes_insert_by_brand_member": {
          "name": "brand_sizes_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_sizes_update_by_brand_member": {
          "name": "brand_sizes_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_sizes_delete_by_brand_member": {
          "name": "brand_sizes_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_tags": {
      "name": "brand_tags",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "hex": {
          "name": "hex",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "brand_tags_brand_name_unq": {
          "name": "brand_tags_brand_name_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "brand_tags_brand_id_brands_id_fk": {
          "name": "brand_tags_brand_id_brands_id_fk",
          "tableFrom": "brand_tags",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_tags_select_for_brand_members": {
          "name": "brand_tags_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_tags_insert_by_brand_members": {
          "name": "brand_tags_insert_by_brand_members",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_tags_update_by_brand_members": {
          "name": "brand_tags_update_by_brand_members",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_tags_delete_by_brand_members": {
          "name": "brand_tags_delete_by_brand_members",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.showcase_brands": {
      "name": "showcase_brands",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "legal_name": {
          "name": "legal_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "website": {
          "name": "website",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address_line_1": {
          "name": "address_line_1",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address_line_2": {
          "name": "address_line_2",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "city": {
          "name": "city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "state": {
          "name": "state",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "zip": {
          "name": "zip",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "country_code": {
          "name": "country_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "showcase_brands_brand_name_unq": {
          "name": "showcase_brands_brand_name_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "showcase_brands_brand_id_brands_id_fk": {
          "name": "showcase_brands_brand_id_brands_id_fk",
          "tableFrom": "showcase_brands",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "showcase_brands_select_for_brand_members": {
          "name": "showcase_brands_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "showcase_brands_insert_by_brand_member": {
          "name": "showcase_brands_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "showcase_brands_update_by_brand_member": {
          "name": "showcase_brands_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "showcase_brands_delete_by_brand_member": {
          "name": "showcase_brands_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.products": {
      "name": "products",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "product_identifier": {
          "name": "product_identifier",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "upid": {
          "name": "upid",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "showcase_brand_id": {
          "name": "showcase_brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "primary_image_url": {
          "name": "primary_image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "category_id": {
          "name": "category_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "season_id": {
          "name": "season_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "template_id": {
          "name": "template_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'unpublished'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "products_brand_id_product_identifier_unq": {
          "name": "products_brand_id_product_identifier_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_identifier",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_brand_id": {
          "name": "idx_products_brand_id",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_brand_status": {
          "name": "idx_products_brand_status",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_brand_created": {
          "name": "idx_products_brand_created",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_brand_upid": {
          "name": "idx_products_brand_upid",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "upid",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_brand_category": {
          "name": "idx_products_brand_category",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "category_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_brand_season": {
          "name": "idx_products_brand_season",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "season_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_brand_name": {
          "name": "idx_products_brand_name",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "products_brand_id_brands_id_fk": {
          "name": "products_brand_id_brands_id_fk",
          "tableFrom": "products",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "products_showcase_brand_id_showcase_brands_id_fk": {
          "name": "products_showcase_brand_id_showcase_brands_id_fk",
          "tableFrom": "products",
          "tableTo": "showcase_brands",
          "columnsFrom": ["showcase_brand_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "cascade"
        },
        "products_category_id_categories_id_fk": {
          "name": "products_category_id_categories_id_fk",
          "tableFrom": "products",
          "tableTo": "categories",
          "columnsFrom": ["category_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "cascade"
        },
        "products_season_id_brand_seasons_id_fk": {
          "name": "products_season_id_brand_seasons_id_fk",
          "tableFrom": "products",
          "tableTo": "brand_seasons",
          "columnsFrom": ["season_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "cascade"
        },
        "products_template_id_passport_templates_id_fk": {
          "name": "products_template_id_passport_templates_id_fk",
          "tableFrom": "products",
          "tableTo": "passport_templates",
          "columnsFrom": ["template_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "products_select_for_brand_members": {
          "name": "products_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "products_insert_by_brand_members": {
          "name": "products_insert_by_brand_members",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "products_update_by_brand_members": {
          "name": "products_update_by_brand_members",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "products_delete_by_brand_members": {
          "name": "products_delete_by_brand_members",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.product_variants": {
      "name": "product_variants",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "color_id": {
          "name": "color_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "size_id": {
          "name": "size_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "upid": {
          "name": "upid",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_product_variants_product_id": {
          "name": "idx_product_variants_product_id",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_variants_product_created": {
          "name": "idx_product_variants_product_created",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_variants_upid": {
          "name": "idx_product_variants_upid",
          "columns": [
            {
              "expression": "upid",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "where": "(upid IS NOT NULL)",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "product_variants_product_id_products_id_fk": {
          "name": "product_variants_product_id_products_id_fk",
          "tableFrom": "product_variants",
          "tableTo": "products",
          "columnsFrom": ["product_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "product_variants_color_id_brand_colors_id_fk": {
          "name": "product_variants_color_id_brand_colors_id_fk",
          "tableFrom": "product_variants",
          "tableTo": "brand_colors",
          "columnsFrom": ["color_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "cascade"
        },
        "product_variants_size_id_brand_sizes_id_fk": {
          "name": "product_variants_size_id_brand_sizes_id_fk",
          "tableFrom": "product_variants",
          "tableTo": "brand_sizes",
          "columnsFrom": ["size_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "product_variants_select_for_brand_members": {
          "name": "product_variants_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "product_variants_insert_by_brand_member": {
          "name": "product_variants_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "product_variants_update_by_brand_member": {
          "name": "product_variants_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "product_variants_delete_by_brand_member": {
          "name": "product_variants_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.product_materials": {
      "name": "product_materials",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "brand_material_id": {
          "name": "brand_material_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "percentage": {
          "name": "percentage",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "product_materials_product_material_unq": {
          "name": "product_materials_product_material_unq",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "brand_material_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_materials_product_id": {
          "name": "idx_product_materials_product_id",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_materials_product_created": {
          "name": "idx_product_materials_product_created",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "product_materials_product_id_products_id_fk": {
          "name": "product_materials_product_id_products_id_fk",
          "tableFrom": "product_materials",
          "tableTo": "products",
          "columnsFrom": ["product_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "product_materials_brand_material_id_brand_materials_id_fk": {
          "name": "product_materials_brand_material_id_brand_materials_id_fk",
          "tableFrom": "product_materials",
          "tableTo": "brand_materials",
          "columnsFrom": ["brand_material_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "product_materials_select_for_brand_members": {
          "name": "product_materials_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        },
        "product_materials_insert_by_brand_member": {
          "name": "product_materials_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        },
        "product_materials_update_by_brand_member": {
          "name": "product_materials_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        },
        "product_materials_delete_by_brand_member": {
          "name": "product_materials_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.product_journey_steps": {
      "name": "product_journey_steps",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "sort_index": {
          "name": "sort_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "step_type": {
          "name": "step_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "product_journey_steps_product_sort_unq": {
          "name": "product_journey_steps_product_sort_unq",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "sort_index",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_journey_steps_product_id": {
          "name": "idx_product_journey_steps_product_id",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_journey_steps_product_sort": {
          "name": "idx_product_journey_steps_product_sort",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "sort_index",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "product_journey_steps_product_id_products_id_fk": {
          "name": "product_journey_steps_product_id_products_id_fk",
          "tableFrom": "product_journey_steps",
          "tableTo": "products",
          "columnsFrom": ["product_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "product_journey_steps_select_for_brand_members": {
          "name": "product_journey_steps_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        },
        "product_journey_steps_insert_by_brand_member": {
          "name": "product_journey_steps_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        },
        "product_journey_steps_update_by_brand_member": {
          "name": "product_journey_steps_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        },
        "product_journey_steps_delete_by_brand_member": {
          "name": "product_journey_steps_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.product_journey_step_facilities": {
      "name": "product_journey_step_facilities",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "journey_step_id": {
          "name": "journey_step_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "facility_id": {
          "name": "facility_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "product_journey_step_facilities_unique": {
          "name": "product_journey_step_facilities_unique",
          "columns": [
            {
              "expression": "journey_step_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "facility_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_journey_step_facilities_step_id": {
          "name": "idx_journey_step_facilities_step_id",
          "columns": [
            {
              "expression": "journey_step_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "product_journey_step_facilities_journey_step_id_product_journey_steps_id_fk": {
          "name": "product_journey_step_facilities_journey_step_id_product_journey_steps_id_fk",
          "tableFrom": "product_journey_step_facilities",
          "tableTo": "product_journey_steps",
          "columnsFrom": ["journey_step_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "product_journey_step_facilities_facility_id_brand_facilities_id_fk": {
          "name": "product_journey_step_facilities_facility_id_brand_facilities_id_fk",
          "tableFrom": "product_journey_step_facilities",
          "tableTo": "brand_facilities",
          "columnsFrom": ["facility_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "product_journey_step_facilities_select_for_brand_members": {
          "name": "product_journey_step_facilities_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_journey_steps pjs\n        INNER JOIN products p ON pjs.product_id = p.id\n        WHERE pjs.id = journey_step_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "product_journey_step_facilities_insert_by_brand_member": {
          "name": "product_journey_step_facilities_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n        SELECT 1 FROM product_journey_steps pjs\n        INNER JOIN products p ON pjs.product_id = p.id\n        WHERE pjs.id = journey_step_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "product_journey_step_facilities_update_by_brand_member": {
          "name": "product_journey_step_facilities_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_journey_steps pjs\n        INNER JOIN products p ON pjs.product_id = p.id\n        WHERE pjs.id = journey_step_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "product_journey_step_facilities_delete_by_brand_member": {
          "name": "product_journey_step_facilities_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_journey_steps pjs\n        INNER JOIN products p ON pjs.product_id = p.id\n        WHERE pjs.id = journey_step_id\n        AND is_brand_member(p.brand_id)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.product_environment": {
      "name": "product_environment",
      "schema": "",
      "columns": {
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "carbon_kg_co2e": {
          "name": "carbon_kg_co2e",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "water_liters": {
          "name": "water_liters",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "product_environment_product_id_products_id_fk": {
          "name": "product_environment_product_id_products_id_fk",
          "tableFrom": "product_environment",
          "tableTo": "products",
          "columnsFrom": ["product_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "product_environment_select_for_brand_members": {
          "name": "product_environment_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "product_environment_insert_by_brand_member": {
          "name": "product_environment_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "product_environment_update_by_brand_member": {
          "name": "product_environment_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "product_environment_delete_by_brand_member": {
          "name": "product_environment_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.product_eco_claims": {
      "name": "product_eco_claims",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "eco_claim_id": {
          "name": "eco_claim_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "product_eco_claims_unique": {
          "name": "product_eco_claims_unique",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "eco_claim_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_eco_claims_product_id": {
          "name": "idx_product_eco_claims_product_id",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_eco_claims_product_created": {
          "name": "idx_product_eco_claims_product_created",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "product_eco_claims_product_id_products_id_fk": {
          "name": "product_eco_claims_product_id_products_id_fk",
          "tableFrom": "product_eco_claims",
          "tableTo": "products",
          "columnsFrom": ["product_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "product_eco_claims_eco_claim_id_brand_eco_claims_id_fk": {
          "name": "product_eco_claims_eco_claim_id_brand_eco_claims_id_fk",
          "tableFrom": "product_eco_claims",
          "tableTo": "brand_eco_claims",
          "columnsFrom": ["eco_claim_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "product_eco_claims_select_for_brand_members": {
          "name": "product_eco_claims_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        },
        "product_eco_claims_insert_by_brand_member": {
          "name": "product_eco_claims_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        },
        "product_eco_claims_update_by_brand_member": {
          "name": "product_eco_claims_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        },
        "product_eco_claims_delete_by_brand_member": {
          "name": "product_eco_claims_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.tags_on_product": {
      "name": "tags_on_product",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tag_id": {
          "name": "tag_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "tags_on_product_tag_product_unq": {
          "name": "tags_on_product_tag_product_unq",
          "columns": [
            {
              "expression": "tag_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "tags_on_product_tag_id_idx": {
          "name": "tags_on_product_tag_id_idx",
          "columns": [
            {
              "expression": "tag_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "tags_on_product_product_id_idx": {
          "name": "tags_on_product_product_id_idx",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "tags_on_product_tag_id_brand_tags_id_fk": {
          "name": "tags_on_product_tag_id_brand_tags_id_fk",
          "tableFrom": "tags_on_product",
          "tableTo": "brand_tags",
          "columnsFrom": ["tag_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "tags_on_product_product_id_products_id_fk": {
          "name": "tags_on_product_product_id_products_id_fk",
          "tableFrom": "tags_on_product",
          "tableTo": "products",
          "columnsFrom": ["product_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "tags_on_product_select_for_brand_members": {
          "name": "tags_on_product_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "tags_on_product_insert_by_brand_members": {
          "name": "tags_on_product_insert_by_brand_members",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "tags_on_product_delete_by_brand_members": {
          "name": "tags_on_product_delete_by_brand_members",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.file_assets": {
      "name": "file_assets",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "bucket": {
          "name": "bucket",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "path": {
          "name": "path",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "mime_type": {
          "name": "mime_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "bytes": {
          "name": "bytes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "file_assets_bucket_path_unq": {
          "name": "file_assets_bucket_path_unq",
          "columns": [
            {
              "expression": "bucket",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "path",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "file_assets_brand_id_brands_id_fk": {
          "name": "file_assets_brand_id_brands_id_fk",
          "tableFrom": "file_assets",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "file_assets_select_for_brand_members": {
          "name": "file_assets_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "(brand_id IS NULL) OR is_brand_member(brand_id)"
        },
        "file_assets_insert_by_brand_member_or_system": {
          "name": "file_assets_insert_by_brand_member_or_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "(brand_id IS NULL) OR is_brand_member(brand_id)"
        },
        "file_assets_update_by_brand_member_or_system": {
          "name": "file_assets_update_by_brand_member_or_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "(brand_id IS NULL) OR is_brand_member(brand_id)"
        },
        "file_assets_delete_by_brand_member_or_system": {
          "name": "file_assets_delete_by_brand_member_or_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "(brand_id IS NULL) OR is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.import_jobs": {
      "name": "import_jobs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "filename": {
          "name": "filename",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "finished_at": {
          "name": "finished_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "commit_started_at": {
          "name": "commit_started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "requires_value_approval": {
          "name": "requires_value_approval",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "summary": {
          "name": "summary",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "import_jobs_brand_id_brands_id_fk": {
          "name": "import_jobs_brand_id_brands_id_fk",
          "tableFrom": "import_jobs",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "import_jobs_select_for_brand_members": {
          "name": "import_jobs_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "import_jobs_insert_by_brand_member": {
          "name": "import_jobs_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "import_jobs_update_by_brand_member": {
          "name": "import_jobs_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "import_jobs_delete_by_brand_member": {
          "name": "import_jobs_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.import_rows": {
      "name": "import_rows",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "row_number": {
          "name": "row_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "raw": {
          "name": "raw",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "normalized": {
          "name": "normalized",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "error": {
          "name": "error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "import_rows_job_row_unq": {
          "name": "import_rows_job_row_unq",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "row_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "import_rows_job_id_import_jobs_id_fk": {
          "name": "import_rows_job_id_import_jobs_id_fk",
          "tableFrom": "import_rows",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "import_rows_select_for_brand_members": {
          "name": "import_rows_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM import_jobs \n        WHERE import_jobs.id = job_id \n        AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "import_rows_insert_by_brand_member": {
          "name": "import_rows_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n        SELECT 1 FROM import_jobs \n        WHERE import_jobs.id = job_id \n        AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "import_rows_update_by_brand_member": {
          "name": "import_rows_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM import_jobs \n        WHERE import_jobs.id = job_id \n        AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "import_rows_delete_by_brand_member": {
          "name": "import_rows_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM import_jobs \n        WHERE import_jobs.id = job_id \n        AND is_brand_member(import_jobs.brand_id)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.passport_templates": {
      "name": "passport_templates",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "theme": {
          "name": "theme",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "passport_templates_brand_id_brands_id_fk": {
          "name": "passport_templates_brand_id_brands_id_fk",
          "tableFrom": "passport_templates",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "passport_templates_select_for_brand_members": {
          "name": "passport_templates_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "passport_templates_insert_by_brand_member": {
          "name": "passport_templates_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "passport_templates_update_by_brand_member": {
          "name": "passport_templates_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "passport_templates_delete_by_brand_member": {
          "name": "passport_templates_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.passport_template_modules": {
      "name": "passport_template_modules",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "template_id": {
          "name": "template_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "module_key": {
          "name": "module_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "enabled": {
          "name": "enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "sort_index": {
          "name": "sort_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "passport_template_modules_template_module_unq": {
          "name": "passport_template_modules_template_module_unq",
          "columns": [
            {
              "expression": "template_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "module_key",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "passport_template_modules_template_id_passport_templates_id_fk": {
          "name": "passport_template_modules_template_id_passport_templates_id_fk",
          "tableFrom": "passport_template_modules",
          "tableTo": "passport_templates",
          "columnsFrom": ["template_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "passport_template_modules_select_for_brand_members": {
          "name": "passport_template_modules_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member((SELECT brand_id FROM passport_templates WHERE id = template_id))"
        },
        "passport_template_modules_insert_by_brand_member": {
          "name": "passport_template_modules_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member((SELECT brand_id FROM passport_templates WHERE id = template_id))"
        },
        "passport_template_modules_update_by_brand_member": {
          "name": "passport_template_modules_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member((SELECT brand_id FROM passport_templates WHERE id = template_id))"
        },
        "passport_template_modules_delete_by_brand_member": {
          "name": "passport_template_modules_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member((SELECT brand_id FROM passport_templates WHERE id = template_id))"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staging_products": {
      "name": "staging_products",
      "schema": "",
      "columns": {
        "staging_id": {
          "name": "staging_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "row_number": {
          "name": "row_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "existing_product_id": {
          "name": "existing_product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "showcase_brand_id": {
          "name": "showcase_brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "primary_image_url": {
          "name": "primary_image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "category_id": {
          "name": "category_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "season_id": {
          "name": "season_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "product_identifier": {
          "name": "product_identifier",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "product_upid": {
          "name": "product_upid",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "staging_products_action_idx": {
          "name": "staging_products_action_idx",
          "columns": [
            {
              "expression": "action",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_products_brand_id_idx": {
          "name": "staging_products_brand_id_idx",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_products_existing_product_id_idx": {
          "name": "staging_products_existing_product_id_idx",
          "columns": [
            {
              "expression": "existing_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_products_job_id_idx": {
          "name": "staging_products_job_id_idx",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_products_job_row_unq": {
          "name": "staging_products_job_row_unq",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "row_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staging_products_existing_product_id_products_id_fk": {
          "name": "staging_products_existing_product_id_products_id_fk",
          "tableFrom": "staging_products",
          "tableTo": "products",
          "columnsFrom": ["existing_product_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_products_job_id_import_jobs_id_fk": {
          "name": "staging_products_job_id_import_jobs_id_fk",
          "tableFrom": "staging_products",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "staging_products_delete_by_system": {
          "name": "staging_products_delete_by_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "(EXISTS ( SELECT 1\n   FROM import_jobs\n  WHERE ((import_jobs.id = staging_products.job_id) AND is_brand_member(import_jobs.brand_id))))"
        },
        "staging_products_insert_by_system": {
          "name": "staging_products_insert_by_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        },
        "staging_products_select_for_brand_members": {
          "name": "staging_products_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "staging_products_update_by_system": {
          "name": "staging_products_update_by_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staging_product_variants": {
      "name": "staging_product_variants",
      "schema": "",
      "columns": {
        "staging_id": {
          "name": "staging_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staging_product_id": {
          "name": "staging_product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "row_number": {
          "name": "row_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "existing_variant_id": {
          "name": "existing_variant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "color_id": {
          "name": "color_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "size_id": {
          "name": "size_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "upid": {
          "name": "upid",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "staging_product_variants_action_idx": {
          "name": "staging_product_variants_action_idx",
          "columns": [
            {
              "expression": "action",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_variants_existing_variant_id_idx": {
          "name": "staging_product_variants_existing_variant_id_idx",
          "columns": [
            {
              "expression": "existing_variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_variants_job_id_idx": {
          "name": "staging_product_variants_job_id_idx",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_variants_job_row_unq": {
          "name": "staging_product_variants_job_row_unq",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "row_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_variants_staging_product_id_idx": {
          "name": "staging_product_variants_staging_product_id_idx",
          "columns": [
            {
              "expression": "staging_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_variants_upid_idx": {
          "name": "staging_product_variants_upid_idx",
          "columns": [
            {
              "expression": "upid",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staging_product_variants_existing_variant_id_product_variants_i": {
          "name": "staging_product_variants_existing_variant_id_product_variants_i",
          "tableFrom": "staging_product_variants",
          "tableTo": "product_variants",
          "columnsFrom": ["existing_variant_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_product_variants_job_id_import_jobs_id_fk": {
          "name": "staging_product_variants_job_id_import_jobs_id_fk",
          "tableFrom": "staging_product_variants",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_product_variants_staging_product_id_staging_products_st": {
          "name": "staging_product_variants_staging_product_id_staging_products_st",
          "tableFrom": "staging_product_variants",
          "tableTo": "staging_products",
          "columnsFrom": ["staging_product_id"],
          "columnsTo": ["staging_id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "staging_product_variants_delete_by_system": {
          "name": "staging_product_variants_delete_by_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "(EXISTS ( SELECT 1\n   FROM import_jobs\n  WHERE ((import_jobs.id = staging_product_variants.job_id) AND is_brand_member(import_jobs.brand_id))))"
        },
        "staging_product_variants_insert_by_system": {
          "name": "staging_product_variants_insert_by_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_variants_select_for_brand_members": {
          "name": "staging_product_variants_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1\n        FROM import_jobs\n        WHERE import_jobs.id = job_id\n          AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "staging_product_variants_update_by_system": {
          "name": "staging_product_variants_update_by_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staging_product_materials": {
      "name": "staging_product_materials",
      "schema": "",
      "columns": {
        "staging_id": {
          "name": "staging_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staging_product_id": {
          "name": "staging_product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "brand_material_id": {
          "name": "brand_material_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "percentage": {
          "name": "percentage",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "staging_product_materials_job_id_idx": {
          "name": "staging_product_materials_job_id_idx",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_materials_staging_product_id_idx": {
          "name": "staging_product_materials_staging_product_id_idx",
          "columns": [
            {
              "expression": "staging_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_materials_unique": {
          "name": "staging_product_materials_unique",
          "columns": [
            {
              "expression": "staging_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "brand_material_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staging_product_materials_brand_material_id_brand_materials_id_": {
          "name": "staging_product_materials_brand_material_id_brand_materials_id_",
          "tableFrom": "staging_product_materials",
          "tableTo": "brand_materials",
          "columnsFrom": ["brand_material_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        },
        "staging_product_materials_job_id_import_jobs_id_fk": {
          "name": "staging_product_materials_job_id_import_jobs_id_fk",
          "tableFrom": "staging_product_materials",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_product_materials_staging_product_id_staging_products_s": {
          "name": "staging_product_materials_staging_product_id_staging_products_s",
          "tableFrom": "staging_product_materials",
          "tableTo": "staging_products",
          "columnsFrom": ["staging_product_id"],
          "columnsTo": ["staging_id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "staging_product_materials_delete_by_system": {
          "name": "staging_product_materials_delete_by_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_materials_insert_by_system": {
          "name": "staging_product_materials_insert_by_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_materials_select_for_brand_members": {
          "name": "staging_product_materials_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1\n        FROM import_jobs\n        WHERE import_jobs.id = job_id\n          AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "staging_product_materials_update_by_system": {
          "name": "staging_product_materials_update_by_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staging_product_journey_steps": {
      "name": "staging_product_journey_steps",
      "schema": "",
      "columns": {
        "staging_id": {
          "name": "staging_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staging_product_id": {
          "name": "staging_product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "sort_index": {
          "name": "sort_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "step_type": {
          "name": "step_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "facility_id": {
          "name": "facility_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "staging_product_journey_steps_job_id_idx": {
          "name": "staging_product_journey_steps_job_id_idx",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_journey_steps_staging_product_id_idx": {
          "name": "staging_product_journey_steps_staging_product_id_idx",
          "columns": [
            {
              "expression": "staging_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_journey_steps_unique": {
          "name": "staging_product_journey_steps_unique",
          "columns": [
            {
              "expression": "staging_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops"
            },
            {
              "expression": "sort_index",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staging_product_journey_steps_facility_id_brand_facilities_id_f": {
          "name": "staging_product_journey_steps_facility_id_brand_facilities_id_f",
          "tableFrom": "staging_product_journey_steps",
          "tableTo": "brand_facilities",
          "columnsFrom": ["facility_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        },
        "staging_product_journey_steps_job_id_import_jobs_id_fk": {
          "name": "staging_product_journey_steps_job_id_import_jobs_id_fk",
          "tableFrom": "staging_product_journey_steps",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_product_journey_steps_staging_product_id_staging_produc": {
          "name": "staging_product_journey_steps_staging_product_id_staging_produc",
          "tableFrom": "staging_product_journey_steps",
          "tableTo": "staging_products",
          "columnsFrom": ["staging_product_id"],
          "columnsTo": ["staging_id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "staging_product_journey_steps_delete_by_system": {
          "name": "staging_product_journey_steps_delete_by_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_journey_steps_insert_by_system": {
          "name": "staging_product_journey_steps_insert_by_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_journey_steps_select_for_brand_members": {
          "name": "staging_product_journey_steps_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1\n        FROM import_jobs\n        WHERE import_jobs.id = job_id\n          AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "staging_product_journey_steps_update_by_system": {
          "name": "staging_product_journey_steps_update_by_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staging_product_environment": {
      "name": "staging_product_environment",
      "schema": "",
      "columns": {
        "staging_id": {
          "name": "staging_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staging_product_id": {
          "name": "staging_product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "carbon_kg_co2e": {
          "name": "carbon_kg_co2e",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "water_liters": {
          "name": "water_liters",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "staging_product_environment_job_id_idx": {
          "name": "staging_product_environment_job_id_idx",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_environment_staging_product_id_idx": {
          "name": "staging_product_environment_staging_product_id_idx",
          "columns": [
            {
              "expression": "staging_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_environment_unique": {
          "name": "staging_product_environment_unique",
          "columns": [
            {
              "expression": "staging_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staging_product_environment_job_id_import_jobs_id_fk": {
          "name": "staging_product_environment_job_id_import_jobs_id_fk",
          "tableFrom": "staging_product_environment",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_product_environment_staging_product_id_staging_products": {
          "name": "staging_product_environment_staging_product_id_staging_products",
          "tableFrom": "staging_product_environment",
          "tableTo": "staging_products",
          "columnsFrom": ["staging_product_id"],
          "columnsTo": ["staging_id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "staging_product_environment_delete_by_system": {
          "name": "staging_product_environment_delete_by_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_environment_insert_by_system": {
          "name": "staging_product_environment_insert_by_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_environment_select_for_brand_members": {
          "name": "staging_product_environment_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1\n        FROM import_jobs\n        WHERE import_jobs.id = job_id\n          AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "staging_product_environment_update_by_system": {
          "name": "staging_product_environment_update_by_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staging_product_eco_claims": {
      "name": "staging_product_eco_claims",
      "schema": "",
      "columns": {
        "staging_id": {
          "name": "staging_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staging_product_id": {
          "name": "staging_product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "eco_claim_id": {
          "name": "eco_claim_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "staging_product_eco_claims_job_id_idx": {
          "name": "staging_product_eco_claims_job_id_idx",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_eco_claims_staging_product_id_idx": {
          "name": "staging_product_eco_claims_staging_product_id_idx",
          "columns": [
            {
              "expression": "staging_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_eco_claims_unique": {
          "name": "staging_product_eco_claims_unique",
          "columns": [
            {
              "expression": "staging_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "eco_claim_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staging_product_eco_claims_eco_claim_id_brand_eco_claims_id_fk": {
          "name": "staging_product_eco_claims_eco_claim_id_brand_eco_claims_id_fk",
          "tableFrom": "staging_product_eco_claims",
          "tableTo": "brand_eco_claims",
          "columnsFrom": ["eco_claim_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        },
        "staging_product_eco_claims_job_id_import_jobs_id_fk": {
          "name": "staging_product_eco_claims_job_id_import_jobs_id_fk",
          "tableFrom": "staging_product_eco_claims",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_product_eco_claims_staging_product_id_staging_products_": {
          "name": "staging_product_eco_claims_staging_product_id_staging_products_",
          "tableFrom": "staging_product_eco_claims",
          "tableTo": "staging_products",
          "columnsFrom": ["staging_product_id"],
          "columnsTo": ["staging_id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "staging_product_eco_claims_delete_by_system": {
          "name": "staging_product_eco_claims_delete_by_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_eco_claims_insert_by_system": {
          "name": "staging_product_eco_claims_insert_by_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_eco_claims_select_for_brand_members": {
          "name": "staging_product_eco_claims_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1\n        FROM import_jobs\n        WHERE import_jobs.id = job_id\n          AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "staging_product_eco_claims_update_by_system": {
          "name": "staging_product_eco_claims_update_by_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.value_mappings": {
      "name": "value_mappings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "source_column": {
          "name": "source_column",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "raw_value": {
          "name": "raw_value",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "target": {
          "name": "target",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "target_id": {
          "name": "target_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "value_mappings_brand_col_raw_unq": {
          "name": "value_mappings_brand_col_raw_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "source_column",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            },
            {
              "expression": "raw_value",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "value_mappings_brand_id_brands_id_fk": {
          "name": "value_mappings_brand_id_brands_id_fk",
          "tableFrom": "value_mappings",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "value_mappings_delete_by_brand_member": {
          "name": "value_mappings_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "value_mappings_insert_by_brand_member": {
          "name": "value_mappings_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "value_mappings_select_for_brand_members": {
          "name": "value_mappings_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "value_mappings_update_by_brand_member": {
          "name": "value_mappings_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.user_role": {
      "name": "user_role",
      "schema": "public",
      "values": ["owner", "member"]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}
