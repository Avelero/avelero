{
  "id": "7b1080b2-565e-47c2-85a9-63ed620d1db5",
  "prevId": "6ea5166e-8b10-41de-990c-c0b684f950c3",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "full_name": {
          "name": "full_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_path": {
          "name": "avatar_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_users_brand_id": {
          "name": "idx_users_brand_id",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "where": "(brand_id IS NOT NULL)",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "users_id_users_id_fk": {
          "name": "users_id_users_id_fk",
          "tableFrom": "users",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": ["id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_email_key": {
          "name": "users_email_key",
          "nullsNotDistinct": false,
          "columns": ["email"]
        }
      },
      "policies": {
        "users_select_own_profile": {
          "name": "users_select_own_profile",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "auth.uid() = id"
        },
        "users_select_for_brand_members": {
          "name": "users_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "shares_brand_with(id)"
        },
        "users_update_own_profile": {
          "name": "users_update_own_profile",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "auth.uid() = id",
          "withCheck": "\n        auth.uid() = id\n        AND (\n          brand_id IS NULL\n          OR EXISTS (\n            SELECT 1\n            FROM brand_members bm\n            WHERE bm.brand_id = users.brand_id\n              AND bm.user_id = auth.uid()\n          )\n        )\n      "
        },
        "users_insert_own_profile": {
          "name": "users_insert_own_profile",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "auth.uid() = id"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brands": {
      "name": "brands",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "country_code": {
          "name": "country_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "logo_path": {
          "name": "logo_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_brands_active": {
          "name": "idx_brands_active",
          "columns": [
            {
              "expression": "id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "(deleted_at IS NULL)",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_brands_slug": {
          "name": "idx_brands_slug",
          "columns": [
            {
              "expression": "slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "(slug IS NOT NULL)",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_brands_email": {
          "name": "idx_brands_email",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brands_update_by_member": {
          "name": "brands_update_by_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(id)"
        },
        "brands_delete_by_owner": {
          "name": "brands_delete_by_owner",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_owner(id)"
        },
        "brands_select_for_invite_recipients": {
          "name": "brands_select_for_invite_recipients",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"]
        },
        "brands_select_for_members": {
          "name": "brands_select_for_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(id)"
        },
        "brands_insert_by_authenticated": {
          "name": "brands_insert_by_authenticated",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_collections": {
      "name": "brand_collections",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "filter": {
          "name": "filter",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "brand_collections_brand_name_unq": {
          "name": "brand_collections_brand_name_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "brand_collections_brand_id_brands_id_fk": {
          "name": "brand_collections_brand_id_brands_id_fk",
          "tableFrom": "brand_collections",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_collections_select_for_brand_members": {
          "name": "brand_collections_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_collections_insert_by_brand_member": {
          "name": "brand_collections_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_collections_update_by_brand_member": {
          "name": "brand_collections_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_collections_delete_by_brand_member": {
          "name": "brand_collections_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_members": {
      "name": "brand_members",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ux_brand_members_user_brand": {
          "name": "ux_brand_members_user_brand",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_brand_members_brand_id": {
          "name": "idx_brand_members_brand_id",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_brand_members_user_id": {
          "name": "idx_brand_members_user_id",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "brand_members_user_id_users_id_fk": {
          "name": "brand_members_user_id_users_id_fk",
          "tableFrom": "brand_members",
          "tableTo": "users",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "brand_members_brand_id_brands_id_fk": {
          "name": "brand_members_brand_id_brands_id_fk",
          "tableFrom": "brand_members",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "brand_members_user_id_brand_id_key": {
          "name": "brand_members_user_id_brand_id_key",
          "nullsNotDistinct": false,
          "columns": ["user_id", "brand_id"]
        }
      },
      "policies": {
        "brand_members_update_by_owner": {
          "name": "brand_members_update_by_owner",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_owner(brand_id)"
        },
        "brand_members_select_for_members": {
          "name": "brand_members_select_for_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_members_delete_self": {
          "name": "brand_members_delete_self",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        },
        "brand_members_delete_owner_non_owner": {
          "name": "brand_members_delete_owner_non_owner",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        },
        "brand_members_insert_first_owner_self": {
          "name": "brand_members_insert_first_owner_self",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {
        "brand_members_role_check": {
          "name": "brand_members_role_check",
          "value": "role = ANY (ARRAY['owner'::text, 'member'::text])"
        }
      },
      "isRLSEnabled": false
    },
    "public.brand_invites": {
      "name": "brand_invites",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "token_hash": {
          "name": "token_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_brand_invites_brand_id": {
          "name": "idx_brand_invites_brand_id",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_brand_invites_expires_at": {
          "name": "idx_brand_invites_expires_at",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_brand_invites_token_hash": {
          "name": "idx_brand_invites_token_hash",
          "columns": [
            {
              "expression": "token_hash",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_brand_invites_valid_lookup": {
          "name": "idx_brand_invites_valid_lookup",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_brand_invites_email": {
          "name": "idx_brand_invites_email",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_brand_invites_email_expires": {
          "name": "idx_brand_invites_email_expires",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            },
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ux_brand_invites_token_hash_not_null": {
          "name": "ux_brand_invites_token_hash_not_null",
          "columns": [
            {
              "expression": "token_hash",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": true,
          "where": "(token_hash IS NOT NULL)",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "brand_invites_brand_id_brands_id_fk": {
          "name": "brand_invites_brand_id_brands_id_fk",
          "tableFrom": "brand_invites",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_invites_update_by_owner": {
          "name": "brand_invites_update_by_owner",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_owner(brand_id)"
        },
        "brand_invites_insert_by_owner": {
          "name": "brand_invites_insert_by_owner",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_owner(brand_id)"
        },
        "brand_invites_delete_by_owner": {
          "name": "brand_invites_delete_by_owner",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_owner(brand_id)"
        },
        "brand_invites_select_for_recipient": {
          "name": "brand_invites_select_for_recipient",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"]
        },
        "brand_invites_delete_by_recipient": {
          "name": "brand_invites_delete_by_recipient",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        },
        "brand_invites_select_for_members": {
          "name": "brand_invites_select_for_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {
        "brand_invites_role_check": {
          "name": "brand_invites_role_check",
          "value": "role = ANY (ARRAY['owner'::text, 'member'::text])"
        }
      },
      "isRLSEnabled": false
    },
    "public.brand_tags": {
      "name": "brand_tags",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "hex": {
          "name": "hex",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "brand_tags_brand_name_unq": {
          "name": "brand_tags_brand_name_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "brand_tags_brand_id_brands_id_fk": {
          "name": "brand_tags_brand_id_brands_id_fk",
          "tableFrom": "brand_tags",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_tags_select_for_brand_members": {
          "name": "brand_tags_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_tags_insert_by_brand_members": {
          "name": "brand_tags_insert_by_brand_members",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_tags_update_by_brand_members": {
          "name": "brand_tags_update_by_brand_members",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_tags_delete_by_brand_members": {
          "name": "brand_tags_delete_by_brand_members",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_theme": {
      "name": "brand_theme",
      "schema": "",
      "columns": {
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "theme_styles": {
          "name": "theme_styles",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "theme_config": {
          "name": "theme_config",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "stylesheet_path": {
          "name": "stylesheet_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "google_fonts_url": {
          "name": "google_fonts_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "screenshot_desktop_path": {
          "name": "screenshot_desktop_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "screenshot_mobile_path": {
          "name": "screenshot_mobile_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_brand_theme_updated_at": {
          "name": "idx_brand_theme_updated_at",
          "columns": [
            {
              "expression": "updated_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "brand_theme_brand_id_brands_id_fk": {
          "name": "brand_theme_brand_id_brands_id_fk",
          "tableFrom": "brand_theme",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {
        "brand_theme_brand_id_pkey": {
          "name": "brand_theme_brand_id_pkey",
          "columns": ["brand_id"]
        }
      },
      "uniqueConstraints": {},
      "policies": {
        "brand_theme_select_for_brand_members": {
          "name": "brand_theme_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_theme_insert_by_brand_member": {
          "name": "brand_theme_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_theme_update_by_brand_member": {
          "name": "brand_theme_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)",
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_theme_delete_by_brand_member": {
          "name": "brand_theme_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_attributes": {
      "name": "brand_attributes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "taxonomy_attribute_id": {
          "name": "taxonomy_attribute_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "brand_attributes_brand_name_unq": {
          "name": "brand_attributes_brand_name_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "brand_attributes_brand_id_brands_id_fk": {
          "name": "brand_attributes_brand_id_brands_id_fk",
          "tableFrom": "brand_attributes",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "brand_attributes_taxonomy_attribute_id_taxonomy_attributes_id_fk": {
          "name": "brand_attributes_taxonomy_attribute_id_taxonomy_attributes_id_fk",
          "tableFrom": "brand_attributes",
          "tableTo": "taxonomy_attributes",
          "columnsFrom": ["taxonomy_attribute_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_attributes_select_for_brand_members": {
          "name": "brand_attributes_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_attributes_insert_by_brand_member": {
          "name": "brand_attributes_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_attributes_update_by_brand_member": {
          "name": "brand_attributes_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_attributes_delete_by_brand_member": {
          "name": "brand_attributes_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_attribute_values": {
      "name": "brand_attribute_values",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "attribute_id": {
          "name": "attribute_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "taxonomy_value_id": {
          "name": "taxonomy_value_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "brand_attribute_values_brand_attr_name_unq": {
          "name": "brand_attribute_values_brand_attr_name_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "attribute_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "brand_attribute_values_brand_id_brands_id_fk": {
          "name": "brand_attribute_values_brand_id_brands_id_fk",
          "tableFrom": "brand_attribute_values",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "brand_attribute_values_attribute_id_brand_attributes_id_fk": {
          "name": "brand_attribute_values_attribute_id_brand_attributes_id_fk",
          "tableFrom": "brand_attribute_values",
          "tableTo": "brand_attributes",
          "columnsFrom": ["attribute_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "brand_attribute_values_taxonomy_value_id_taxonomy_values_id_fk": {
          "name": "brand_attribute_values_taxonomy_value_id_taxonomy_values_id_fk",
          "tableFrom": "brand_attribute_values",
          "tableTo": "taxonomy_values",
          "columnsFrom": ["taxonomy_value_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_attribute_values_select_for_brand_members": {
          "name": "brand_attribute_values_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_attribute_values_insert_by_brand_member": {
          "name": "brand_attribute_values_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_attribute_values_update_by_brand_member": {
          "name": "brand_attribute_values_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_attribute_values_delete_by_brand_member": {
          "name": "brand_attribute_values_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_certifications": {
      "name": "brand_certifications",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "certification_code": {
          "name": "certification_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "institute_name": {
          "name": "institute_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "institute_email": {
          "name": "institute_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "institute_website": {
          "name": "institute_website",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "institute_address_line_1": {
          "name": "institute_address_line_1",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "institute_address_line_2": {
          "name": "institute_address_line_2",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "institute_city": {
          "name": "institute_city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "institute_state": {
          "name": "institute_state",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "institute_zip": {
          "name": "institute_zip",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "institute_country_code": {
          "name": "institute_country_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "issue_date": {
          "name": "issue_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "expiry_date": {
          "name": "expiry_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "certification_path": {
          "name": "certification_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "brand_certifications_brand_id_brands_id_fk": {
          "name": "brand_certifications_brand_id_brands_id_fk",
          "tableFrom": "brand_certifications",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_certifications_select_for_brand_members": {
          "name": "brand_certifications_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_certifications_insert_by_brand_member": {
          "name": "brand_certifications_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_certifications_update_by_brand_member": {
          "name": "brand_certifications_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_certifications_delete_by_brand_member": {
          "name": "brand_certifications_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_eco_claims": {
      "name": "brand_eco_claims",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "claim": {
          "name": "claim",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "brand_eco_claims_brand_claim_unq": {
          "name": "brand_eco_claims_brand_claim_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "claim",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "brand_eco_claims_brand_id_brands_id_fk": {
          "name": "brand_eco_claims_brand_id_brands_id_fk",
          "tableFrom": "brand_eco_claims",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_eco_claims_select_for_brand_members": {
          "name": "brand_eco_claims_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_eco_claims_insert_by_brand_member": {
          "name": "brand_eco_claims_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_eco_claims_update_by_brand_member": {
          "name": "brand_eco_claims_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_eco_claims_delete_by_brand_member": {
          "name": "brand_eco_claims_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_facilities": {
      "name": "brand_facilities",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "display_name": {
          "name": "display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "legal_name": {
          "name": "legal_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "website": {
          "name": "website",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address_line_1": {
          "name": "address_line_1",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address_line_2": {
          "name": "address_line_2",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "city": {
          "name": "city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "state": {
          "name": "state",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "zip": {
          "name": "zip",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "country_code": {
          "name": "country_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "brand_facilities_brand_id_brands_id_fk": {
          "name": "brand_facilities_brand_id_brands_id_fk",
          "tableFrom": "brand_facilities",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_facilities_select_for_brand_members": {
          "name": "brand_facilities_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_facilities_insert_by_brand_member": {
          "name": "brand_facilities_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_facilities_update_by_brand_member": {
          "name": "brand_facilities_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_facilities_delete_by_brand_member": {
          "name": "brand_facilities_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_manufacturers": {
      "name": "brand_manufacturers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "legal_name": {
          "name": "legal_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "website": {
          "name": "website",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address_line_1": {
          "name": "address_line_1",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address_line_2": {
          "name": "address_line_2",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "city": {
          "name": "city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "state": {
          "name": "state",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "zip": {
          "name": "zip",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "country_code": {
          "name": "country_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "brand_manufacturers_brand_name_unq": {
          "name": "brand_manufacturers_brand_name_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "brand_manufacturers_brand_id_brands_id_fk": {
          "name": "brand_manufacturers_brand_id_brands_id_fk",
          "tableFrom": "brand_manufacturers",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_manufacturers_select_for_brand_members": {
          "name": "brand_manufacturers_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_manufacturers_insert_by_brand_member": {
          "name": "brand_manufacturers_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_manufacturers_update_by_brand_member": {
          "name": "brand_manufacturers_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_manufacturers_delete_by_brand_member": {
          "name": "brand_manufacturers_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_materials": {
      "name": "brand_materials",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "certification_id": {
          "name": "certification_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "recyclable": {
          "name": "recyclable",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "country_of_origin": {
          "name": "country_of_origin",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "brand_materials_brand_id_brands_id_fk": {
          "name": "brand_materials_brand_id_brands_id_fk",
          "tableFrom": "brand_materials",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "brand_materials_certification_id_brand_certifications_id_fk": {
          "name": "brand_materials_certification_id_brand_certifications_id_fk",
          "tableFrom": "brand_materials",
          "tableTo": "brand_certifications",
          "columnsFrom": ["certification_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_materials_select_for_brand_members": {
          "name": "brand_materials_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_materials_insert_by_brand_member": {
          "name": "brand_materials_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_materials_update_by_brand_member": {
          "name": "brand_materials_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_materials_delete_by_brand_member": {
          "name": "brand_materials_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_seasons": {
      "name": "brand_seasons",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "start_date": {
          "name": "start_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "end_date": {
          "name": "end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "ongoing": {
          "name": "ongoing",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "brand_seasons_brand_name_unq": {
          "name": "brand_seasons_brand_name_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "brand_seasons_brand_id_brands_id_fk": {
          "name": "brand_seasons_brand_id_brands_id_fk",
          "tableFrom": "brand_seasons",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_seasons_select_for_brand_members": {
          "name": "brand_seasons_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_seasons_insert_by_brand_members": {
          "name": "brand_seasons_insert_by_brand_members",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_seasons_update_by_brand_members": {
          "name": "brand_seasons_update_by_brand_members",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_seasons_delete_by_brand_members": {
          "name": "brand_seasons_delete_by_brand_members",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.products": {
      "name": "products",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "product_handle": {
          "name": "product_handle",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "manufacturer_id": {
          "name": "manufacturer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "image_path": {
          "name": "image_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "category_id": {
          "name": "category_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "season_id": {
          "name": "season_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'unpublished'"
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'manual'"
        },
        "source_integration_id": {
          "name": "source_integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "products_brand_id_product_handle_unq": {
          "name": "products_brand_id_product_handle_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_handle",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_brand_id": {
          "name": "idx_products_brand_id",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_brand_status": {
          "name": "idx_products_brand_status",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_brand_created": {
          "name": "idx_products_brand_created",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": false,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_brand_product_handle": {
          "name": "idx_products_brand_product_handle",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "product_handle",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_brand_category": {
          "name": "idx_products_brand_category",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "category_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_brand_season": {
          "name": "idx_products_brand_season",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "season_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_brand_name": {
          "name": "idx_products_brand_name",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_products_name": {
          "name": "idx_products_name",
          "columns": [
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "products_brand_id_brands_id_fk": {
          "name": "products_brand_id_brands_id_fk",
          "tableFrom": "products",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "products_manufacturer_id_brand_manufacturers_id_fk": {
          "name": "products_manufacturer_id_brand_manufacturers_id_fk",
          "tableFrom": "products",
          "tableTo": "brand_manufacturers",
          "columnsFrom": ["manufacturer_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "cascade"
        },
        "products_category_id_taxonomy_categories_id_fk": {
          "name": "products_category_id_taxonomy_categories_id_fk",
          "tableFrom": "products",
          "tableTo": "taxonomy_categories",
          "columnsFrom": ["category_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "cascade"
        },
        "products_season_id_brand_seasons_id_fk": {
          "name": "products_season_id_brand_seasons_id_fk",
          "tableFrom": "products",
          "tableTo": "brand_seasons",
          "columnsFrom": ["season_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "cascade"
        },
        "products_source_integration_id_brand_integrations_id_fk": {
          "name": "products_source_integration_id_brand_integrations_id_fk",
          "tableFrom": "products",
          "tableTo": "brand_integrations",
          "columnsFrom": ["source_integration_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "products_select_for_brand_members": {
          "name": "products_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "products_insert_by_brand_members": {
          "name": "products_insert_by_brand_members",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "products_update_by_brand_members": {
          "name": "products_update_by_brand_members",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "products_delete_by_brand_members": {
          "name": "products_delete_by_brand_members",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.product_variants": {
      "name": "product_variants",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "barcode": {
          "name": "barcode",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sku": {
          "name": "sku",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "upid": {
          "name": "upid",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "image_path": {
          "name": "image_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_integration": {
          "name": "source_integration",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_external_id": {
          "name": "source_external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_product_variants_product_id": {
          "name": "idx_product_variants_product_id",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_variants_product_created": {
          "name": "idx_product_variants_product_created",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_variants_upid": {
          "name": "idx_product_variants_upid",
          "columns": [
            {
              "expression": "upid",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "where": "(upid IS NOT NULL)",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_unique_upid_per_brand": {
          "name": "idx_unique_upid_per_brand",
          "columns": [
            {
              "expression": "upid",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "get_product_brand_id(product_id)",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "upid IS NOT NULL AND upid != ''",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "product_variants_product_id_products_id_fk": {
          "name": "product_variants_product_id_products_id_fk",
          "tableFrom": "product_variants",
          "tableTo": "products",
          "columnsFrom": ["product_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "product_variants_select_for_brand_members": {
          "name": "product_variants_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "product_variants_insert_by_brand_member": {
          "name": "product_variants_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "product_variants_update_by_brand_member": {
          "name": "product_variants_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "product_variants_delete_by_brand_member": {
          "name": "product_variants_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.product_materials": {
      "name": "product_materials",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "brand_material_id": {
          "name": "brand_material_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "percentage": {
          "name": "percentage",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "product_materials_product_material_unq": {
          "name": "product_materials_product_material_unq",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "brand_material_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_materials_product_id": {
          "name": "idx_product_materials_product_id",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_materials_product_created": {
          "name": "idx_product_materials_product_created",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "product_materials_product_id_products_id_fk": {
          "name": "product_materials_product_id_products_id_fk",
          "tableFrom": "product_materials",
          "tableTo": "products",
          "columnsFrom": ["product_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "product_materials_brand_material_id_brand_materials_id_fk": {
          "name": "product_materials_brand_material_id_brand_materials_id_fk",
          "tableFrom": "product_materials",
          "tableTo": "brand_materials",
          "columnsFrom": ["brand_material_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "product_materials_select_for_brand_members": {
          "name": "product_materials_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        },
        "product_materials_insert_by_brand_member": {
          "name": "product_materials_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        },
        "product_materials_update_by_brand_member": {
          "name": "product_materials_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        },
        "product_materials_delete_by_brand_member": {
          "name": "product_materials_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.product_journey_steps": {
      "name": "product_journey_steps",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "sort_index": {
          "name": "sort_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "step_type": {
          "name": "step_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "facility_id": {
          "name": "facility_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "product_journey_steps_product_sort_unq": {
          "name": "product_journey_steps_product_sort_unq",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "sort_index",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_journey_steps_product_id": {
          "name": "idx_product_journey_steps_product_id",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_journey_steps_product_sort": {
          "name": "idx_product_journey_steps_product_sort",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "sort_index",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "product_journey_steps_product_id_products_id_fk": {
          "name": "product_journey_steps_product_id_products_id_fk",
          "tableFrom": "product_journey_steps",
          "tableTo": "products",
          "columnsFrom": ["product_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "product_journey_steps_facility_id_brand_facilities_id_fk": {
          "name": "product_journey_steps_facility_id_brand_facilities_id_fk",
          "tableFrom": "product_journey_steps",
          "tableTo": "brand_facilities",
          "columnsFrom": ["facility_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "product_journey_steps_select_for_brand_members": {
          "name": "product_journey_steps_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        },
        "product_journey_steps_insert_by_brand_member": {
          "name": "product_journey_steps_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        },
        "product_journey_steps_update_by_brand_member": {
          "name": "product_journey_steps_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        },
        "product_journey_steps_delete_by_brand_member": {
          "name": "product_journey_steps_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.product_environment": {
      "name": "product_environment",
      "schema": "",
      "columns": {
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "value": {
          "name": "value",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "unit": {
          "name": "unit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metric": {
          "name": "metric",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "product_environment_product_id_products_id_fk": {
          "name": "product_environment_product_id_products_id_fk",
          "tableFrom": "product_environment",
          "tableTo": "products",
          "columnsFrom": ["product_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {
        "product_environment_pkey": {
          "name": "product_environment_pkey",
          "columns": ["product_id", "metric"]
        }
      },
      "uniqueConstraints": {},
      "policies": {
        "product_environment_select_for_brand_members": {
          "name": "product_environment_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "product_environment_insert_by_brand_member": {
          "name": "product_environment_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "product_environment_update_by_brand_member": {
          "name": "product_environment_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "product_environment_delete_by_brand_member": {
          "name": "product_environment_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.product_eco_claims": {
      "name": "product_eco_claims",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "eco_claim_id": {
          "name": "eco_claim_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "product_eco_claims_unique": {
          "name": "product_eco_claims_unique",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "eco_claim_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_eco_claims_product_id": {
          "name": "idx_product_eco_claims_product_id",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_product_eco_claims_product_created": {
          "name": "idx_product_eco_claims_product_created",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "product_eco_claims_product_id_products_id_fk": {
          "name": "product_eco_claims_product_id_products_id_fk",
          "tableFrom": "product_eco_claims",
          "tableTo": "products",
          "columnsFrom": ["product_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "product_eco_claims_eco_claim_id_brand_eco_claims_id_fk": {
          "name": "product_eco_claims_eco_claim_id_brand_eco_claims_id_fk",
          "tableFrom": "product_eco_claims",
          "tableTo": "brand_eco_claims",
          "columnsFrom": ["eco_claim_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "product_eco_claims_select_for_brand_members": {
          "name": "product_eco_claims_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        },
        "product_eco_claims_insert_by_brand_member": {
          "name": "product_eco_claims_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        },
        "product_eco_claims_update_by_brand_member": {
          "name": "product_eco_claims_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        },
        "product_eco_claims_delete_by_brand_member": {
          "name": "product_eco_claims_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM products \n        WHERE products.id = product_id \n        AND is_brand_member(products.brand_id)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.product_tags": {
      "name": "product_tags",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tag_id": {
          "name": "tag_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "tags_on_product_tag_product_unq": {
          "name": "tags_on_product_tag_product_unq",
          "columns": [
            {
              "expression": "tag_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "tags_on_product_tag_id_idx": {
          "name": "tags_on_product_tag_id_idx",
          "columns": [
            {
              "expression": "tag_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "tags_on_product_product_id_idx": {
          "name": "tags_on_product_product_id_idx",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "product_tags_tag_id_brand_tags_id_fk": {
          "name": "product_tags_tag_id_brand_tags_id_fk",
          "tableFrom": "product_tags",
          "tableTo": "brand_tags",
          "columnsFrom": ["tag_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "product_tags_product_id_products_id_fk": {
          "name": "product_tags_product_id_products_id_fk",
          "tableFrom": "product_tags",
          "tableTo": "products",
          "columnsFrom": ["product_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "tags_on_product_select_for_brand_members": {
          "name": "tags_on_product_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "tags_on_product_insert_by_brand_members": {
          "name": "tags_on_product_insert_by_brand_members",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "tags_on_product_delete_by_brand_members": {
          "name": "tags_on_product_delete_by_brand_members",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.product_variant_attributes": {
      "name": "product_variant_attributes",
      "schema": "",
      "columns": {
        "variant_id": {
          "name": "variant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "attribute_value_id": {
          "name": "attribute_value_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "sort_order": {
          "name": "sort_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_product_variant_attributes_variant": {
          "name": "idx_product_variant_attributes_variant",
          "columns": [
            {
              "expression": "variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "product_variant_attributes_variant_id_product_variants_id_fk": {
          "name": "product_variant_attributes_variant_id_product_variants_id_fk",
          "tableFrom": "product_variant_attributes",
          "tableTo": "product_variants",
          "columnsFrom": ["variant_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "product_variant_attributes_attribute_value_id_brand_attribute_values_id_fk": {
          "name": "product_variant_attributes_attribute_value_id_brand_attribute_values_id_fk",
          "tableFrom": "product_variant_attributes",
          "tableTo": "brand_attribute_values",
          "columnsFrom": ["attribute_value_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {
        "product_variant_attributes_pkey": {
          "name": "product_variant_attributes_pkey",
          "columns": ["variant_id", "attribute_value_id"]
        }
      },
      "uniqueConstraints": {},
      "policies": {
        "product_variant_attributes_select_for_brand_members": {
          "name": "product_variant_attributes_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "product_variant_attributes_insert_by_brand_member": {
          "name": "product_variant_attributes_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "product_variant_attributes_update_by_brand_member": {
          "name": "product_variant_attributes_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "product_variant_attributes_delete_by_brand_member": {
          "name": "product_variant_attributes_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.product_weight": {
      "name": "product_weight",
      "schema": "",
      "columns": {
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "weight": {
          "name": "weight",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "weight_unit": {
          "name": "weight_unit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "product_weight_product_id_products_id_fk": {
          "name": "product_weight_product_id_products_id_fk",
          "tableFrom": "product_weight",
          "tableTo": "products",
          "columnsFrom": ["product_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "product_weight_select_for_brand_members": {
          "name": "product_weight_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "product_weight_insert_by_brand_member": {
          "name": "product_weight_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "product_weight_update_by_brand_member": {
          "name": "product_weight_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "product_weight_delete_by_brand_member": {
          "name": "product_weight_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.product_commercial": {
      "name": "product_commercial",
      "schema": "",
      "columns": {
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "webshop_url": {
          "name": "webshop_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "price": {
          "name": "price",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sales_status": {
          "name": "sales_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "product_commercial_product_id_products_id_fk": {
          "name": "product_commercial_product_id_products_id_fk",
          "tableFrom": "product_commercial",
          "tableTo": "products",
          "columnsFrom": ["product_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "product_commercial_select_for_brand_members": {
          "name": "product_commercial_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "product_commercial_insert_by_brand_member": {
          "name": "product_commercial_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "product_commercial_update_by_brand_member": {
          "name": "product_commercial_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        },
        "product_commercial_delete_by_brand_member": {
          "name": "product_commercial_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM products \n      WHERE products.id = product_id \n      AND is_brand_member(products.brand_id)\n    )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.variant_commercial": {
      "name": "variant_commercial",
      "schema": "",
      "columns": {
        "variant_id": {
          "name": "variant_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "webshop_url": {
          "name": "webshop_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "price": {
          "name": "price",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sales_status": {
          "name": "sales_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_integration": {
          "name": "source_integration",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_external_id": {
          "name": "source_external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "variant_commercial_variant_id_product_variants_id_fk": {
          "name": "variant_commercial_variant_id_product_variants_id_fk",
          "tableFrom": "variant_commercial",
          "tableTo": "product_variants",
          "columnsFrom": ["variant_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "variant_commercial_select_for_brand_members": {
          "name": "variant_commercial_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "variant_commercial_insert_by_brand_member": {
          "name": "variant_commercial_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "variant_commercial_update_by_brand_member": {
          "name": "variant_commercial_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "variant_commercial_delete_by_brand_member": {
          "name": "variant_commercial_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.variant_environment": {
      "name": "variant_environment",
      "schema": "",
      "columns": {
        "variant_id": {
          "name": "variant_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "carbon_kg_co2e": {
          "name": "carbon_kg_co2e",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "water_liters": {
          "name": "water_liters",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "source_integration": {
          "name": "source_integration",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_external_id": {
          "name": "source_external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "variant_environment_variant_id_product_variants_id_fk": {
          "name": "variant_environment_variant_id_product_variants_id_fk",
          "tableFrom": "variant_environment",
          "tableTo": "product_variants",
          "columnsFrom": ["variant_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "variant_environment_select_for_brand_members": {
          "name": "variant_environment_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "variant_environment_insert_by_brand_member": {
          "name": "variant_environment_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "variant_environment_update_by_brand_member": {
          "name": "variant_environment_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "variant_environment_delete_by_brand_member": {
          "name": "variant_environment_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.variant_eco_claims": {
      "name": "variant_eco_claims",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "variant_id": {
          "name": "variant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "eco_claim_id": {
          "name": "eco_claim_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "source_integration": {
          "name": "source_integration",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_external_id": {
          "name": "source_external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "variant_eco_claims_unique": {
          "name": "variant_eco_claims_unique",
          "columns": [
            {
              "expression": "variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "eco_claim_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_variant_eco_claims_variant_id": {
          "name": "idx_variant_eco_claims_variant_id",
          "columns": [
            {
              "expression": "variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "variant_eco_claims_variant_id_product_variants_id_fk": {
          "name": "variant_eco_claims_variant_id_product_variants_id_fk",
          "tableFrom": "variant_eco_claims",
          "tableTo": "product_variants",
          "columnsFrom": ["variant_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "variant_eco_claims_eco_claim_id_brand_eco_claims_id_fk": {
          "name": "variant_eco_claims_eco_claim_id_brand_eco_claims_id_fk",
          "tableFrom": "variant_eco_claims",
          "tableTo": "brand_eco_claims",
          "columnsFrom": ["eco_claim_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "variant_eco_claims_select_for_brand_members": {
          "name": "variant_eco_claims_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "variant_eco_claims_insert_by_brand_member": {
          "name": "variant_eco_claims_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "variant_eco_claims_update_by_brand_member": {
          "name": "variant_eco_claims_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "variant_eco_claims_delete_by_brand_member": {
          "name": "variant_eco_claims_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.variant_materials": {
      "name": "variant_materials",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "variant_id": {
          "name": "variant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "brand_material_id": {
          "name": "brand_material_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "percentage": {
          "name": "percentage",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "source_integration": {
          "name": "source_integration",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_external_id": {
          "name": "source_external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "variant_materials_variant_material_unq": {
          "name": "variant_materials_variant_material_unq",
          "columns": [
            {
              "expression": "variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "brand_material_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_variant_materials_variant_id": {
          "name": "idx_variant_materials_variant_id",
          "columns": [
            {
              "expression": "variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "variant_materials_variant_id_product_variants_id_fk": {
          "name": "variant_materials_variant_id_product_variants_id_fk",
          "tableFrom": "variant_materials",
          "tableTo": "product_variants",
          "columnsFrom": ["variant_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "variant_materials_brand_material_id_brand_materials_id_fk": {
          "name": "variant_materials_brand_material_id_brand_materials_id_fk",
          "tableFrom": "variant_materials",
          "tableTo": "brand_materials",
          "columnsFrom": ["brand_material_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "variant_materials_select_for_brand_members": {
          "name": "variant_materials_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "variant_materials_insert_by_brand_member": {
          "name": "variant_materials_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "variant_materials_update_by_brand_member": {
          "name": "variant_materials_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )",
          "withCheck": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "variant_materials_delete_by_brand_member": {
          "name": "variant_materials_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.variant_weight": {
      "name": "variant_weight",
      "schema": "",
      "columns": {
        "variant_id": {
          "name": "variant_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "weight": {
          "name": "weight",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "weight_unit": {
          "name": "weight_unit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_integration": {
          "name": "source_integration",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_external_id": {
          "name": "source_external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "variant_weight_variant_id_product_variants_id_fk": {
          "name": "variant_weight_variant_id_product_variants_id_fk",
          "tableFrom": "variant_weight",
          "tableTo": "product_variants",
          "columnsFrom": ["variant_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "variant_weight_select_for_brand_members": {
          "name": "variant_weight_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "variant_weight_insert_by_brand_member": {
          "name": "variant_weight_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "variant_weight_update_by_brand_member": {
          "name": "variant_weight_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "variant_weight_delete_by_brand_member": {
          "name": "variant_weight_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.variant_journey_steps": {
      "name": "variant_journey_steps",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "variant_id": {
          "name": "variant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "sort_index": {
          "name": "sort_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "step_type": {
          "name": "step_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "facility_id": {
          "name": "facility_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "source_integration": {
          "name": "source_integration",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_external_id": {
          "name": "source_external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "variant_journey_steps_variant_sort_unq": {
          "name": "variant_journey_steps_variant_sort_unq",
          "columns": [
            {
              "expression": "variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "sort_index",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_variant_journey_steps_variant_id": {
          "name": "idx_variant_journey_steps_variant_id",
          "columns": [
            {
              "expression": "variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_variant_journey_steps_variant_sort": {
          "name": "idx_variant_journey_steps_variant_sort",
          "columns": [
            {
              "expression": "variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "sort_index",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_variant_journey_steps_facility_id": {
          "name": "idx_variant_journey_steps_facility_id",
          "columns": [
            {
              "expression": "facility_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "variant_journey_steps_variant_id_product_variants_id_fk": {
          "name": "variant_journey_steps_variant_id_product_variants_id_fk",
          "tableFrom": "variant_journey_steps",
          "tableTo": "product_variants",
          "columnsFrom": ["variant_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "variant_journey_steps_facility_id_brand_facilities_id_fk": {
          "name": "variant_journey_steps_facility_id_brand_facilities_id_fk",
          "tableFrom": "variant_journey_steps",
          "tableTo": "brand_facilities",
          "columnsFrom": ["facility_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "variant_journey_steps_select_for_brand_members": {
          "name": "variant_journey_steps_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "variant_journey_steps_insert_by_brand_member": {
          "name": "variant_journey_steps_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "variant_journey_steps_update_by_brand_member": {
          "name": "variant_journey_steps_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )",
          "withCheck": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        },
        "variant_journey_steps_delete_by_brand_member": {
          "name": "variant_journey_steps_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM product_variants pv\n        JOIN products p ON p.id = pv.product_id\n        WHERE pv.id = variant_id\n        AND is_brand_member(p.brand_id)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.file_assets": {
      "name": "file_assets",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "bucket": {
          "name": "bucket",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "path": {
          "name": "path",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "mime_type": {
          "name": "mime_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "bytes": {
          "name": "bytes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "file_assets_bucket_path_unq": {
          "name": "file_assets_bucket_path_unq",
          "columns": [
            {
              "expression": "bucket",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "path",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "file_assets_brand_id_brands_id_fk": {
          "name": "file_assets_brand_id_brands_id_fk",
          "tableFrom": "file_assets",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "file_assets_select_for_brand_members": {
          "name": "file_assets_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "(brand_id IS NULL) OR is_brand_member(brand_id)"
        },
        "file_assets_insert_by_brand_member_or_system": {
          "name": "file_assets_insert_by_brand_member_or_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "(brand_id IS NULL) OR is_brand_member(brand_id)"
        },
        "file_assets_update_by_brand_member_or_system": {
          "name": "file_assets_update_by_brand_member_or_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "(brand_id IS NULL) OR is_brand_member(brand_id)"
        },
        "file_assets_delete_by_brand_member_or_system": {
          "name": "file_assets_delete_by_brand_member_or_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "(brand_id IS NULL) OR is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.import_jobs": {
      "name": "import_jobs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "filename": {
          "name": "filename",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "mode": {
          "name": "mode",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'CREATE'"
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "finished_at": {
          "name": "finished_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "commit_started_at": {
          "name": "commit_started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "requires_value_approval": {
          "name": "requires_value_approval",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "has_exportable_failures": {
          "name": "has_exportable_failures",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "summary": {
          "name": "summary",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "correction_file_path": {
          "name": "correction_file_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "correction_download_url": {
          "name": "correction_download_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "correction_expires_at": {
          "name": "correction_expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "user_email": {
          "name": "user_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "import_jobs_brand_id_brands_id_fk": {
          "name": "import_jobs_brand_id_brands_id_fk",
          "tableFrom": "import_jobs",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "import_jobs_select_for_brand_members": {
          "name": "import_jobs_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "import_jobs_insert_by_brand_member": {
          "name": "import_jobs_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "import_jobs_update_by_brand_member": {
          "name": "import_jobs_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "import_jobs_delete_by_brand_member": {
          "name": "import_jobs_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.import_rows": {
      "name": "import_rows",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "row_number": {
          "name": "row_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "raw": {
          "name": "raw",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "normalized": {
          "name": "normalized",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "error": {
          "name": "error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "import_rows_job_row_unq": {
          "name": "import_rows_job_row_unq",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "row_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "import_rows_job_id_import_jobs_id_fk": {
          "name": "import_rows_job_id_import_jobs_id_fk",
          "tableFrom": "import_rows",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "import_rows_select_for_brand_members": {
          "name": "import_rows_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM import_jobs \n        WHERE import_jobs.id = job_id \n        AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "import_rows_insert_by_brand_member": {
          "name": "import_rows_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n        SELECT 1 FROM import_jobs \n        WHERE import_jobs.id = job_id \n        AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "import_rows_update_by_brand_member": {
          "name": "import_rows_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM import_jobs \n        WHERE import_jobs.id = job_id \n        AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "import_rows_delete_by_brand_member": {
          "name": "import_rows_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM import_jobs \n        WHERE import_jobs.id = job_id \n        AND is_brand_member(import_jobs.brand_id)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.export_jobs": {
      "name": "export_jobs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_email": {
          "name": "user_email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "selection_mode": {
          "name": "selection_mode",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "include_ids": {
          "name": "include_ids",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "exclude_ids": {
          "name": "exclude_ids",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "filter_state": {
          "name": "filter_state",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "search_query": {
          "name": "search_query",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "total_products": {
          "name": "total_products",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "products_processed": {
          "name": "products_processed",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "file_path": {
          "name": "file_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "download_url": {
          "name": "download_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "finished_at": {
          "name": "finished_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "summary": {
          "name": "summary",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "export_jobs_brand_id_brands_id_fk": {
          "name": "export_jobs_brand_id_brands_id_fk",
          "tableFrom": "export_jobs",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "export_jobs_user_id_users_id_fk": {
          "name": "export_jobs_user_id_users_id_fk",
          "tableFrom": "export_jobs",
          "tableTo": "users",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "export_jobs_select_for_brand_members": {
          "name": "export_jobs_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "export_jobs_insert_by_brand_member": {
          "name": "export_jobs_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "export_jobs_update_by_brand_member": {
          "name": "export_jobs_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "export_jobs_delete_by_brand_member": {
          "name": "export_jobs_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staging_products": {
      "name": "staging_products",
      "schema": "",
      "columns": {
        "staging_id": {
          "name": "staging_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "row_number": {
          "name": "row_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "existing_product_id": {
          "name": "existing_product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "manufacturer_id": {
          "name": "manufacturer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "image_path": {
          "name": "image_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "category_id": {
          "name": "category_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "season_id": {
          "name": "season_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "product_handle": {
          "name": "product_handle",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "product_upid": {
          "name": "product_upid",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "row_status": {
          "name": "row_status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "errors": {
          "name": "errors",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "staging_products_action_idx": {
          "name": "staging_products_action_idx",
          "columns": [
            {
              "expression": "action",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_products_brand_id_idx": {
          "name": "staging_products_brand_id_idx",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_products_existing_product_id_idx": {
          "name": "staging_products_existing_product_id_idx",
          "columns": [
            {
              "expression": "existing_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_products_job_id_idx": {
          "name": "staging_products_job_id_idx",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_products_job_row_unq": {
          "name": "staging_products_job_row_unq",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "row_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staging_products_existing_product_id_products_id_fk": {
          "name": "staging_products_existing_product_id_products_id_fk",
          "tableFrom": "staging_products",
          "tableTo": "products",
          "columnsFrom": ["existing_product_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_products_job_id_import_jobs_id_fk": {
          "name": "staging_products_job_id_import_jobs_id_fk",
          "tableFrom": "staging_products",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "staging_products_delete_by_system": {
          "name": "staging_products_delete_by_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "(EXISTS ( SELECT 1\n   FROM import_jobs\n  WHERE ((import_jobs.id = staging_products.job_id) AND is_brand_member(import_jobs.brand_id))))"
        },
        "staging_products_insert_by_system": {
          "name": "staging_products_insert_by_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        },
        "staging_products_select_for_brand_members": {
          "name": "staging_products_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "staging_products_update_by_system": {
          "name": "staging_products_update_by_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staging_product_variants": {
      "name": "staging_product_variants",
      "schema": "",
      "columns": {
        "staging_id": {
          "name": "staging_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staging_product_id": {
          "name": "staging_product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "row_number": {
          "name": "row_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "existing_variant_id": {
          "name": "existing_variant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "barcode": {
          "name": "barcode",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sku": {
          "name": "sku",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "upid": {
          "name": "upid",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name_override": {
          "name": "name_override",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description_override": {
          "name": "description_override",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "image_path_override": {
          "name": "image_path_override",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "row_status": {
          "name": "row_status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "errors": {
          "name": "errors",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "staging_product_variants_action_idx": {
          "name": "staging_product_variants_action_idx",
          "columns": [
            {
              "expression": "action",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_variants_existing_variant_id_idx": {
          "name": "staging_product_variants_existing_variant_id_idx",
          "columns": [
            {
              "expression": "existing_variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_variants_job_id_idx": {
          "name": "staging_product_variants_job_id_idx",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_variants_job_row_unq": {
          "name": "staging_product_variants_job_row_unq",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "row_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_variants_staging_product_id_idx": {
          "name": "staging_product_variants_staging_product_id_idx",
          "columns": [
            {
              "expression": "staging_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_variants_barcode_idx": {
          "name": "staging_product_variants_barcode_idx",
          "columns": [
            {
              "expression": "barcode",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_variants_sku_idx": {
          "name": "staging_product_variants_sku_idx",
          "columns": [
            {
              "expression": "sku",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_variants_upid_idx": {
          "name": "staging_product_variants_upid_idx",
          "columns": [
            {
              "expression": "upid",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staging_product_variants_existing_variant_id_product_variants_i": {
          "name": "staging_product_variants_existing_variant_id_product_variants_i",
          "tableFrom": "staging_product_variants",
          "tableTo": "product_variants",
          "columnsFrom": ["existing_variant_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_product_variants_job_id_import_jobs_id_fk": {
          "name": "staging_product_variants_job_id_import_jobs_id_fk",
          "tableFrom": "staging_product_variants",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_product_variants_staging_product_id_staging_products_st": {
          "name": "staging_product_variants_staging_product_id_staging_products_st",
          "tableFrom": "staging_product_variants",
          "tableTo": "staging_products",
          "columnsFrom": ["staging_product_id"],
          "columnsTo": ["staging_id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "staging_product_variants_delete_by_system": {
          "name": "staging_product_variants_delete_by_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "(EXISTS ( SELECT 1\n   FROM import_jobs\n  WHERE ((import_jobs.id = staging_product_variants.job_id) AND is_brand_member(import_jobs.brand_id))))"
        },
        "staging_product_variants_insert_by_system": {
          "name": "staging_product_variants_insert_by_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_variants_select_for_brand_members": {
          "name": "staging_product_variants_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1\n        FROM import_jobs\n        WHERE import_jobs.id = job_id\n          AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "staging_product_variants_update_by_system": {
          "name": "staging_product_variants_update_by_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staging_product_materials": {
      "name": "staging_product_materials",
      "schema": "",
      "columns": {
        "staging_id": {
          "name": "staging_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staging_product_id": {
          "name": "staging_product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "brand_material_id": {
          "name": "brand_material_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "percentage": {
          "name": "percentage",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "staging_product_materials_job_id_idx": {
          "name": "staging_product_materials_job_id_idx",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_materials_staging_product_id_idx": {
          "name": "staging_product_materials_staging_product_id_idx",
          "columns": [
            {
              "expression": "staging_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_materials_unique": {
          "name": "staging_product_materials_unique",
          "columns": [
            {
              "expression": "staging_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "brand_material_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staging_product_materials_brand_material_id_brand_materials_id_": {
          "name": "staging_product_materials_brand_material_id_brand_materials_id_",
          "tableFrom": "staging_product_materials",
          "tableTo": "brand_materials",
          "columnsFrom": ["brand_material_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        },
        "staging_product_materials_job_id_import_jobs_id_fk": {
          "name": "staging_product_materials_job_id_import_jobs_id_fk",
          "tableFrom": "staging_product_materials",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_product_materials_staging_product_id_staging_products_s": {
          "name": "staging_product_materials_staging_product_id_staging_products_s",
          "tableFrom": "staging_product_materials",
          "tableTo": "staging_products",
          "columnsFrom": ["staging_product_id"],
          "columnsTo": ["staging_id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "staging_product_materials_delete_by_system": {
          "name": "staging_product_materials_delete_by_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_materials_insert_by_system": {
          "name": "staging_product_materials_insert_by_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_materials_select_for_brand_members": {
          "name": "staging_product_materials_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1\n        FROM import_jobs\n        WHERE import_jobs.id = job_id\n          AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "staging_product_materials_update_by_system": {
          "name": "staging_product_materials_update_by_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staging_product_journey_steps": {
      "name": "staging_product_journey_steps",
      "schema": "",
      "columns": {
        "staging_id": {
          "name": "staging_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staging_product_id": {
          "name": "staging_product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "sort_index": {
          "name": "sort_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "step_type": {
          "name": "step_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "facility_id": {
          "name": "facility_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "staging_product_journey_steps_job_id_idx": {
          "name": "staging_product_journey_steps_job_id_idx",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_journey_steps_staging_product_id_idx": {
          "name": "staging_product_journey_steps_staging_product_id_idx",
          "columns": [
            {
              "expression": "staging_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_journey_steps_unique": {
          "name": "staging_product_journey_steps_unique",
          "columns": [
            {
              "expression": "staging_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops"
            },
            {
              "expression": "sort_index",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staging_product_journey_steps_facility_id_brand_facilities_id_f": {
          "name": "staging_product_journey_steps_facility_id_brand_facilities_id_f",
          "tableFrom": "staging_product_journey_steps",
          "tableTo": "brand_facilities",
          "columnsFrom": ["facility_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        },
        "staging_product_journey_steps_job_id_import_jobs_id_fk": {
          "name": "staging_product_journey_steps_job_id_import_jobs_id_fk",
          "tableFrom": "staging_product_journey_steps",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_product_journey_steps_staging_product_id_staging_produc": {
          "name": "staging_product_journey_steps_staging_product_id_staging_produc",
          "tableFrom": "staging_product_journey_steps",
          "tableTo": "staging_products",
          "columnsFrom": ["staging_product_id"],
          "columnsTo": ["staging_id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "staging_product_journey_steps_delete_by_system": {
          "name": "staging_product_journey_steps_delete_by_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_journey_steps_insert_by_system": {
          "name": "staging_product_journey_steps_insert_by_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_journey_steps_select_for_brand_members": {
          "name": "staging_product_journey_steps_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1\n        FROM import_jobs\n        WHERE import_jobs.id = job_id\n          AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "staging_product_journey_steps_update_by_system": {
          "name": "staging_product_journey_steps_update_by_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staging_product_environment": {
      "name": "staging_product_environment",
      "schema": "",
      "columns": {
        "staging_id": {
          "name": "staging_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staging_product_id": {
          "name": "staging_product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "carbon_kg_co2e": {
          "name": "carbon_kg_co2e",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "water_liters": {
          "name": "water_liters",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "staging_product_environment_job_id_idx": {
          "name": "staging_product_environment_job_id_idx",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_environment_staging_product_id_idx": {
          "name": "staging_product_environment_staging_product_id_idx",
          "columns": [
            {
              "expression": "staging_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_environment_unique": {
          "name": "staging_product_environment_unique",
          "columns": [
            {
              "expression": "staging_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staging_product_environment_job_id_import_jobs_id_fk": {
          "name": "staging_product_environment_job_id_import_jobs_id_fk",
          "tableFrom": "staging_product_environment",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_product_environment_staging_product_id_staging_products": {
          "name": "staging_product_environment_staging_product_id_staging_products",
          "tableFrom": "staging_product_environment",
          "tableTo": "staging_products",
          "columnsFrom": ["staging_product_id"],
          "columnsTo": ["staging_id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "staging_product_environment_delete_by_system": {
          "name": "staging_product_environment_delete_by_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_environment_insert_by_system": {
          "name": "staging_product_environment_insert_by_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_environment_select_for_brand_members": {
          "name": "staging_product_environment_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1\n        FROM import_jobs\n        WHERE import_jobs.id = job_id\n          AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "staging_product_environment_update_by_system": {
          "name": "staging_product_environment_update_by_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staging_product_eco_claims": {
      "name": "staging_product_eco_claims",
      "schema": "",
      "columns": {
        "staging_id": {
          "name": "staging_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staging_product_id": {
          "name": "staging_product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "eco_claim_id": {
          "name": "eco_claim_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "staging_product_eco_claims_job_id_idx": {
          "name": "staging_product_eco_claims_job_id_idx",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_eco_claims_staging_product_id_idx": {
          "name": "staging_product_eco_claims_staging_product_id_idx",
          "columns": [
            {
              "expression": "staging_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_eco_claims_unique": {
          "name": "staging_product_eco_claims_unique",
          "columns": [
            {
              "expression": "staging_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "eco_claim_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staging_product_eco_claims_eco_claim_id_brand_eco_claims_id_fk": {
          "name": "staging_product_eco_claims_eco_claim_id_brand_eco_claims_id_fk",
          "tableFrom": "staging_product_eco_claims",
          "tableTo": "brand_eco_claims",
          "columnsFrom": ["eco_claim_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        },
        "staging_product_eco_claims_job_id_import_jobs_id_fk": {
          "name": "staging_product_eco_claims_job_id_import_jobs_id_fk",
          "tableFrom": "staging_product_eco_claims",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_product_eco_claims_staging_product_id_staging_products_": {
          "name": "staging_product_eco_claims_staging_product_id_staging_products_",
          "tableFrom": "staging_product_eco_claims",
          "tableTo": "staging_products",
          "columnsFrom": ["staging_product_id"],
          "columnsTo": ["staging_id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "staging_product_eco_claims_delete_by_system": {
          "name": "staging_product_eco_claims_delete_by_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_eco_claims_insert_by_system": {
          "name": "staging_product_eco_claims_insert_by_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_eco_claims_select_for_brand_members": {
          "name": "staging_product_eco_claims_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1\n        FROM import_jobs\n        WHERE import_jobs.id = job_id\n          AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "staging_product_eco_claims_update_by_system": {
          "name": "staging_product_eco_claims_update_by_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.value_mappings": {
      "name": "value_mappings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "source_column": {
          "name": "source_column",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "raw_value": {
          "name": "raw_value",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "target": {
          "name": "target",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "target_id": {
          "name": "target_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "value_mappings_brand_col_raw_unq": {
          "name": "value_mappings_brand_col_raw_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "source_column",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            },
            {
              "expression": "raw_value",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "value_mappings_brand_id_brands_id_fk": {
          "name": "value_mappings_brand_id_brands_id_fk",
          "tableFrom": "value_mappings",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "value_mappings_delete_by_brand_member": {
          "name": "value_mappings_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "value_mappings_insert_by_brand_member": {
          "name": "value_mappings_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "value_mappings_select_for_brand_members": {
          "name": "value_mappings_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "value_mappings_update_by_brand_member": {
          "name": "value_mappings_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staging_variant_attributes": {
      "name": "staging_variant_attributes",
      "schema": "",
      "columns": {
        "staging_id": {
          "name": "staging_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staging_variant_id": {
          "name": "staging_variant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "attribute_id": {
          "name": "attribute_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "attribute_value_id": {
          "name": "attribute_value_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "sort_order": {
          "name": "sort_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "staging_variant_attributes_job_id_idx": {
          "name": "staging_variant_attributes_job_id_idx",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_variant_attributes_staging_variant_id_idx": {
          "name": "staging_variant_attributes_staging_variant_id_idx",
          "columns": [
            {
              "expression": "staging_variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_variant_attributes_unique": {
          "name": "staging_variant_attributes_unique",
          "columns": [
            {
              "expression": "staging_variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "attribute_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staging_variant_attributes_attribute_id_fk": {
          "name": "staging_variant_attributes_attribute_id_fk",
          "tableFrom": "staging_variant_attributes",
          "tableTo": "brand_attributes",
          "columnsFrom": ["attribute_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        },
        "staging_variant_attributes_attribute_value_id_fk": {
          "name": "staging_variant_attributes_attribute_value_id_fk",
          "tableFrom": "staging_variant_attributes",
          "tableTo": "brand_attribute_values",
          "columnsFrom": ["attribute_value_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        },
        "staging_variant_attributes_staging_variant_id_fk": {
          "name": "staging_variant_attributes_staging_variant_id_fk",
          "tableFrom": "staging_variant_attributes",
          "tableTo": "staging_product_variants",
          "columnsFrom": ["staging_variant_id"],
          "columnsTo": ["staging_id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_variant_attributes_job_id_fk": {
          "name": "staging_variant_attributes_job_id_fk",
          "tableFrom": "staging_variant_attributes",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "staging_variant_attributes_select_for_brand_members": {
          "name": "staging_variant_attributes_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1\n        FROM import_jobs\n        WHERE import_jobs.id = job_id\n          AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "staging_variant_attributes_insert_by_system": {
          "name": "staging_variant_attributes_insert_by_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        },
        "staging_variant_attributes_update_by_system": {
          "name": "staging_variant_attributes_update_by_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"]
        },
        "staging_variant_attributes_delete_by_system": {
          "name": "staging_variant_attributes_delete_by_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staging_product_tags": {
      "name": "staging_product_tags",
      "schema": "",
      "columns": {
        "staging_id": {
          "name": "staging_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staging_product_id": {
          "name": "staging_product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tag_id": {
          "name": "tag_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "staging_product_tags_job_id_idx": {
          "name": "staging_product_tags_job_id_idx",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_tags_staging_product_id_idx": {
          "name": "staging_product_tags_staging_product_id_idx",
          "columns": [
            {
              "expression": "staging_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_product_tags_unique": {
          "name": "staging_product_tags_unique",
          "columns": [
            {
              "expression": "staging_product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "tag_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staging_product_tags_tag_id_fk": {
          "name": "staging_product_tags_tag_id_fk",
          "tableFrom": "staging_product_tags",
          "tableTo": "brand_tags",
          "columnsFrom": ["tag_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        },
        "staging_product_tags_staging_product_id_fk": {
          "name": "staging_product_tags_staging_product_id_fk",
          "tableFrom": "staging_product_tags",
          "tableTo": "staging_products",
          "columnsFrom": ["staging_product_id"],
          "columnsTo": ["staging_id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_product_tags_job_id_fk": {
          "name": "staging_product_tags_job_id_fk",
          "tableFrom": "staging_product_tags",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "staging_product_tags_select_for_brand_members": {
          "name": "staging_product_tags_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1\n        FROM import_jobs\n        WHERE import_jobs.id = job_id\n          AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "staging_product_tags_insert_by_system": {
          "name": "staging_product_tags_insert_by_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_tags_update_by_system": {
          "name": "staging_product_tags_update_by_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_tags_delete_by_system": {
          "name": "staging_product_tags_delete_by_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staging_product_weight": {
      "name": "staging_product_weight",
      "schema": "",
      "columns": {
        "staging_product_id": {
          "name": "staging_product_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "weight": {
          "name": "weight",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "weight_unit": {
          "name": "weight_unit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "staging_product_weight_staging_product_id_fk": {
          "name": "staging_product_weight_staging_product_id_fk",
          "tableFrom": "staging_product_weight",
          "tableTo": "staging_products",
          "columnsFrom": ["staging_product_id"],
          "columnsTo": ["staging_id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_product_weight_job_id_fk": {
          "name": "staging_product_weight_job_id_fk",
          "tableFrom": "staging_product_weight",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "staging_product_weight_select_for_brand_members": {
          "name": "staging_product_weight_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1\n        FROM import_jobs\n        WHERE import_jobs.id = job_id\n          AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "staging_product_weight_insert_by_system": {
          "name": "staging_product_weight_insert_by_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_weight_update_by_system": {
          "name": "staging_product_weight_update_by_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"]
        },
        "staging_product_weight_delete_by_system": {
          "name": "staging_product_weight_delete_by_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staging_variant_materials": {
      "name": "staging_variant_materials",
      "schema": "",
      "columns": {
        "staging_id": {
          "name": "staging_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staging_variant_id": {
          "name": "staging_variant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "brand_material_id": {
          "name": "brand_material_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "percentage": {
          "name": "percentage",
          "type": "numeric(6, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "staging_variant_materials_job_id_idx": {
          "name": "staging_variant_materials_job_id_idx",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_variant_materials_staging_variant_id_idx": {
          "name": "staging_variant_materials_staging_variant_id_idx",
          "columns": [
            {
              "expression": "staging_variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_variant_materials_unique": {
          "name": "staging_variant_materials_unique",
          "columns": [
            {
              "expression": "staging_variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "brand_material_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staging_variant_materials_brand_material_id_fk": {
          "name": "staging_variant_materials_brand_material_id_fk",
          "tableFrom": "staging_variant_materials",
          "tableTo": "brand_materials",
          "columnsFrom": ["brand_material_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        },
        "staging_variant_materials_staging_variant_id_fk": {
          "name": "staging_variant_materials_staging_variant_id_fk",
          "tableFrom": "staging_variant_materials",
          "tableTo": "staging_product_variants",
          "columnsFrom": ["staging_variant_id"],
          "columnsTo": ["staging_id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_variant_materials_job_id_fk": {
          "name": "staging_variant_materials_job_id_fk",
          "tableFrom": "staging_variant_materials",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "staging_variant_materials_select_for_brand_members": {
          "name": "staging_variant_materials_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1\n        FROM import_jobs\n        WHERE import_jobs.id = job_id\n          AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "staging_variant_materials_insert_by_system": {
          "name": "staging_variant_materials_insert_by_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        },
        "staging_variant_materials_update_by_system": {
          "name": "staging_variant_materials_update_by_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"]
        },
        "staging_variant_materials_delete_by_system": {
          "name": "staging_variant_materials_delete_by_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staging_variant_eco_claims": {
      "name": "staging_variant_eco_claims",
      "schema": "",
      "columns": {
        "staging_id": {
          "name": "staging_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staging_variant_id": {
          "name": "staging_variant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "eco_claim_id": {
          "name": "eco_claim_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "staging_variant_eco_claims_job_id_idx": {
          "name": "staging_variant_eco_claims_job_id_idx",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_variant_eco_claims_staging_variant_id_idx": {
          "name": "staging_variant_eco_claims_staging_variant_id_idx",
          "columns": [
            {
              "expression": "staging_variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_variant_eco_claims_unique": {
          "name": "staging_variant_eco_claims_unique",
          "columns": [
            {
              "expression": "staging_variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "eco_claim_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staging_variant_eco_claims_eco_claim_id_fk": {
          "name": "staging_variant_eco_claims_eco_claim_id_fk",
          "tableFrom": "staging_variant_eco_claims",
          "tableTo": "brand_eco_claims",
          "columnsFrom": ["eco_claim_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        },
        "staging_variant_eco_claims_staging_variant_id_fk": {
          "name": "staging_variant_eco_claims_staging_variant_id_fk",
          "tableFrom": "staging_variant_eco_claims",
          "tableTo": "staging_product_variants",
          "columnsFrom": ["staging_variant_id"],
          "columnsTo": ["staging_id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_variant_eco_claims_job_id_fk": {
          "name": "staging_variant_eco_claims_job_id_fk",
          "tableFrom": "staging_variant_eco_claims",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "staging_variant_eco_claims_select_for_brand_members": {
          "name": "staging_variant_eco_claims_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1\n        FROM import_jobs\n        WHERE import_jobs.id = job_id\n          AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "staging_variant_eco_claims_insert_by_system": {
          "name": "staging_variant_eco_claims_insert_by_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        },
        "staging_variant_eco_claims_update_by_system": {
          "name": "staging_variant_eco_claims_update_by_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"]
        },
        "staging_variant_eco_claims_delete_by_system": {
          "name": "staging_variant_eco_claims_delete_by_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staging_variant_environment": {
      "name": "staging_variant_environment",
      "schema": "",
      "columns": {
        "staging_variant_id": {
          "name": "staging_variant_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "carbon_kg_co2e": {
          "name": "carbon_kg_co2e",
          "type": "numeric(12, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "water_liters": {
          "name": "water_liters",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "staging_variant_environment_staging_variant_id_fk": {
          "name": "staging_variant_environment_staging_variant_id_fk",
          "tableFrom": "staging_variant_environment",
          "tableTo": "staging_product_variants",
          "columnsFrom": ["staging_variant_id"],
          "columnsTo": ["staging_id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_variant_environment_job_id_fk": {
          "name": "staging_variant_environment_job_id_fk",
          "tableFrom": "staging_variant_environment",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "staging_variant_environment_select_for_brand_members": {
          "name": "staging_variant_environment_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1\n        FROM import_jobs\n        WHERE import_jobs.id = job_id\n          AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "staging_variant_environment_insert_by_system": {
          "name": "staging_variant_environment_insert_by_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        },
        "staging_variant_environment_update_by_system": {
          "name": "staging_variant_environment_update_by_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"]
        },
        "staging_variant_environment_delete_by_system": {
          "name": "staging_variant_environment_delete_by_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staging_variant_journey_steps": {
      "name": "staging_variant_journey_steps",
      "schema": "",
      "columns": {
        "staging_id": {
          "name": "staging_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "staging_variant_id": {
          "name": "staging_variant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "sort_index": {
          "name": "sort_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "step_type": {
          "name": "step_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "facility_id": {
          "name": "facility_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "staging_variant_journey_steps_job_id_idx": {
          "name": "staging_variant_journey_steps_job_id_idx",
          "columns": [
            {
              "expression": "job_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_variant_journey_steps_staging_variant_id_idx": {
          "name": "staging_variant_journey_steps_staging_variant_id_idx",
          "columns": [
            {
              "expression": "staging_variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "staging_variant_journey_steps_unique": {
          "name": "staging_variant_journey_steps_unique",
          "columns": [
            {
              "expression": "staging_variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops"
            },
            {
              "expression": "sort_index",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "staging_variant_journey_steps_facility_id_fk": {
          "name": "staging_variant_journey_steps_facility_id_fk",
          "tableFrom": "staging_variant_journey_steps",
          "tableTo": "brand_facilities",
          "columnsFrom": ["facility_id"],
          "columnsTo": ["id"],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        },
        "staging_variant_journey_steps_staging_variant_id_fk": {
          "name": "staging_variant_journey_steps_staging_variant_id_fk",
          "tableFrom": "staging_variant_journey_steps",
          "tableTo": "staging_product_variants",
          "columnsFrom": ["staging_variant_id"],
          "columnsTo": ["staging_id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_variant_journey_steps_job_id_fk": {
          "name": "staging_variant_journey_steps_job_id_fk",
          "tableFrom": "staging_variant_journey_steps",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "staging_variant_journey_steps_select_for_brand_members": {
          "name": "staging_variant_journey_steps_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1\n        FROM import_jobs\n        WHERE import_jobs.id = job_id\n          AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "staging_variant_journey_steps_insert_by_system": {
          "name": "staging_variant_journey_steps_insert_by_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        },
        "staging_variant_journey_steps_update_by_system": {
          "name": "staging_variant_journey_steps_update_by_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"]
        },
        "staging_variant_journey_steps_delete_by_system": {
          "name": "staging_variant_journey_steps_delete_by_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staging_variant_weight": {
      "name": "staging_variant_weight",
      "schema": "",
      "columns": {
        "staging_variant_id": {
          "name": "staging_variant_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "job_id": {
          "name": "job_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "weight": {
          "name": "weight",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "weight_unit": {
          "name": "weight_unit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "staging_variant_weight_staging_variant_id_fk": {
          "name": "staging_variant_weight_staging_variant_id_fk",
          "tableFrom": "staging_variant_weight",
          "tableTo": "staging_product_variants",
          "columnsFrom": ["staging_variant_id"],
          "columnsTo": ["staging_id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "staging_variant_weight_job_id_fk": {
          "name": "staging_variant_weight_job_id_fk",
          "tableFrom": "staging_variant_weight",
          "tableTo": "import_jobs",
          "columnsFrom": ["job_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "staging_variant_weight_select_for_brand_members": {
          "name": "staging_variant_weight_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1\n        FROM import_jobs\n        WHERE import_jobs.id = job_id\n          AND is_brand_member(import_jobs.brand_id)\n      )"
        },
        "staging_variant_weight_insert_by_system": {
          "name": "staging_variant_weight_insert_by_system",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"]
        },
        "staging_variant_weight_update_by_system": {
          "name": "staging_variant_weight_update_by_system",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"]
        },
        "staging_variant_weight_delete_by_system": {
          "name": "staging_variant_weight_delete_by_system",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"]
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.brand_integrations": {
      "name": "brand_integrations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "integration_id": {
          "name": "integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "credentials": {
          "name": "credentials",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "credentials_iv": {
          "name": "credentials_iv",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "shop_domain": {
          "name": "shop_domain",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sync_interval": {
          "name": "sync_interval",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 86400
        },
        "last_sync_at": {
          "name": "last_sync_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_primary": {
          "name": "is_primary",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "match_identifier": {
          "name": "match_identifier",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'barcode'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "brand_integrations_brand_integration_unq": {
          "name": "brand_integrations_brand_integration_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_brand_integrations_brand_id": {
          "name": "idx_brand_integrations_brand_id",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_brand_integrations_status": {
          "name": "idx_brand_integrations_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "brand_integrations_primary_unq": {
          "name": "brand_integrations_primary_unq",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"brand_integrations\".\"is_primary\" = TRUE",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "brand_integrations_brand_id_brands_id_fk": {
          "name": "brand_integrations_brand_id_brands_id_fk",
          "tableFrom": "brand_integrations",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "brand_integrations_integration_id_integrations_id_fk": {
          "name": "brand_integrations_integration_id_integrations_id_fk",
          "tableFrom": "brand_integrations",
          "tableTo": "integrations",
          "columnsFrom": ["integration_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "brand_integrations_select_for_brand_members": {
          "name": "brand_integrations_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_integrations_insert_by_brand_member": {
          "name": "brand_integrations_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "brand_integrations_update_by_brand_member": {
          "name": "brand_integrations_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "brand_integrations_delete_by_brand_member": {
          "name": "brand_integrations_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.integration_field_configs": {
      "name": "integration_field_configs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_integration_id": {
          "name": "brand_integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "field_key": {
          "name": "field_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "ownership_enabled": {
          "name": "ownership_enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "source_option_key": {
          "name": "source_option_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "integration_field_configs_integration_field_unq": {
          "name": "integration_field_configs_integration_field_unq",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "field_key",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_integration_field_configs_integration": {
          "name": "idx_integration_field_configs_integration",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "integration_field_configs_brand_integration_id_brand_integrations_id_fk": {
          "name": "integration_field_configs_brand_integration_id_brand_integrations_id_fk",
          "tableFrom": "integration_field_configs",
          "tableTo": "brand_integrations",
          "columnsFrom": ["brand_integration_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "integration_field_configs_select_for_brand_members": {
          "name": "integration_field_configs_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM brand_integrations bi\n        WHERE bi.id = brand_integration_id\n        AND is_brand_member(bi.brand_id)\n      )"
        },
        "integration_field_configs_insert_by_brand_member": {
          "name": "integration_field_configs_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n        SELECT 1 FROM brand_integrations bi\n        WHERE bi.id = brand_integration_id\n        AND is_brand_member(bi.brand_id)\n      )"
        },
        "integration_field_configs_update_by_brand_member": {
          "name": "integration_field_configs_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM brand_integrations bi\n        WHERE bi.id = brand_integration_id\n        AND is_brand_member(bi.brand_id)\n      )"
        },
        "integration_field_configs_delete_by_brand_member": {
          "name": "integration_field_configs_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM brand_integrations bi\n        WHERE bi.id = brand_integration_id\n        AND is_brand_member(bi.brand_id)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.integrations": {
      "name": "integrations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "auth_type": {
          "name": "auth_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "integrations_slug_unq": {
          "name": "integrations_slug_unq",
          "columns": [
            {
              "expression": "slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "integrations_select_for_authenticated": {
          "name": "integrations_select_for_authenticated",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "true"
        },
        "integrations_insert_by_service_role": {
          "name": "integrations_insert_by_service_role",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["service_role"],
          "withCheck": "true"
        },
        "integrations_update_by_service_role": {
          "name": "integrations_update_by_service_role",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["service_role"],
          "using": "true"
        },
        "integrations_delete_by_service_role": {
          "name": "integrations_delete_by_service_role",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["service_role"],
          "using": "true"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.oauth_states": {
      "name": "oauth_states",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "state": {
          "name": "state",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "integration_slug": {
          "name": "integration_slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "shop_domain": {
          "name": "shop_domain",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_oauth_states_state": {
          "name": "idx_oauth_states_state",
          "columns": [
            {
              "expression": "state",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_oauth_states_expires": {
          "name": "idx_oauth_states_expires",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "oauth_states_brand_id_brands_id_fk": {
          "name": "oauth_states_brand_id_brands_id_fk",
          "tableFrom": "oauth_states",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "oauth_states_select_by_service_role": {
          "name": "oauth_states_select_by_service_role",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["service_role"],
          "using": "true"
        },
        "oauth_states_insert_by_service_role": {
          "name": "oauth_states_insert_by_service_role",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["service_role"],
          "withCheck": "true"
        },
        "oauth_states_update_by_service_role": {
          "name": "oauth_states_update_by_service_role",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["service_role"],
          "using": "true"
        },
        "oauth_states_delete_by_service_role": {
          "name": "oauth_states_delete_by_service_role",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["service_role"],
          "using": "true"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.integration_sync_jobs": {
      "name": "integration_sync_jobs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_integration_id": {
          "name": "brand_integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "trigger_type": {
          "name": "trigger_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'scheduled'"
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "finished_at": {
          "name": "finished_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "variants_processed": {
          "name": "variants_processed",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "variants_created": {
          "name": "variants_created",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "variants_updated": {
          "name": "variants_updated",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "variants_failed": {
          "name": "variants_failed",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "variants_skipped": {
          "name": "variants_skipped",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "products_total": {
          "name": "products_total",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "products_processed": {
          "name": "products_processed",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "products_created": {
          "name": "products_created",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "products_updated": {
          "name": "products_updated",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "products_failed": {
          "name": "products_failed",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "products_skipped": {
          "name": "products_skipped",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "entities_created": {
          "name": "entities_created",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "error_summary": {
          "name": "error_summary",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "error_log": {
          "name": "error_log",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_integration_sync_jobs_integration": {
          "name": "idx_integration_sync_jobs_integration",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_integration_sync_jobs_status": {
          "name": "idx_integration_sync_jobs_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_integration_sync_jobs_created": {
          "name": "idx_integration_sync_jobs_created",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "integration_sync_jobs_brand_integration_id_brand_integrations_id_fk": {
          "name": "integration_sync_jobs_brand_integration_id_brand_integrations_id_fk",
          "tableFrom": "integration_sync_jobs",
          "tableTo": "brand_integrations",
          "columnsFrom": ["brand_integration_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "integration_sync_jobs_select_for_brand_members": {
          "name": "integration_sync_jobs_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM brand_integrations bi\n        WHERE bi.id = brand_integration_id\n        AND is_brand_member(bi.brand_id)\n      )"
        },
        "integration_sync_jobs_insert_by_brand_member": {
          "name": "integration_sync_jobs_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n        SELECT 1 FROM brand_integrations bi\n        WHERE bi.id = brand_integration_id\n        AND is_brand_member(bi.brand_id)\n      )"
        },
        "integration_sync_jobs_update_by_brand_member": {
          "name": "integration_sync_jobs_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM brand_integrations bi\n        WHERE bi.id = brand_integration_id\n        AND is_brand_member(bi.brand_id)\n      )"
        },
        "integration_sync_jobs_delete_by_brand_member": {
          "name": "integration_sync_jobs_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM brand_integrations bi\n        WHERE bi.id = brand_integration_id\n        AND is_brand_member(bi.brand_id)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.promotion_operations": {
      "name": "promotion_operations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_id": {
          "name": "brand_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "new_primary_integration_id": {
          "name": "new_primary_integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "old_primary_integration_id": {
          "name": "old_primary_integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'preparing'"
        },
        "phase": {
          "name": "phase",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "variants_processed": {
          "name": "variants_processed",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total_variants": {
          "name": "total_variants",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "products_created": {
          "name": "products_created",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "products_archived": {
          "name": "products_archived",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "variants_moved": {
          "name": "variants_moved",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "variants_orphaned": {
          "name": "variants_orphaned",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "attributes_created": {
          "name": "attributes_created",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_promotion_operations_brand_id": {
          "name": "idx_promotion_operations_brand_id",
          "columns": [
            {
              "expression": "brand_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_promotion_operations_status": {
          "name": "idx_promotion_operations_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "promotion_operations_brand_id_brands_id_fk": {
          "name": "promotion_operations_brand_id_brands_id_fk",
          "tableFrom": "promotion_operations",
          "tableTo": "brands",
          "columnsFrom": ["brand_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "promotion_operations_new_primary_integration_id_brand_integrations_id_fk": {
          "name": "promotion_operations_new_primary_integration_id_brand_integrations_id_fk",
          "tableFrom": "promotion_operations",
          "tableTo": "brand_integrations",
          "columnsFrom": ["new_primary_integration_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "promotion_operations_old_primary_integration_id_brand_integrations_id_fk": {
          "name": "promotion_operations_old_primary_integration_id_brand_integrations_id_fk",
          "tableFrom": "promotion_operations",
          "tableTo": "brand_integrations",
          "columnsFrom": ["old_primary_integration_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "promotion_operations_select_for_brand_members": {
          "name": "promotion_operations_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "promotion_operations_insert_by_brand_member": {
          "name": "promotion_operations_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "is_brand_member(brand_id)"
        },
        "promotion_operations_update_by_brand_member": {
          "name": "promotion_operations_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        },
        "promotion_operations_delete_by_brand_member": {
          "name": "promotion_operations_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "is_brand_member(brand_id)"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.integration_certification_links": {
      "name": "integration_certification_links",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_integration_id": {
          "name": "brand_integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "certification_id": {
          "name": "certification_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "external_name": {
          "name": "external_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_synced_at": {
          "name": "last_synced_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "integration_certification_links_integration_external_unq": {
          "name": "integration_certification_links_integration_external_unq",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "integration_certification_links_integration_cert_unq": {
          "name": "integration_certification_links_integration_cert_unq",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "certification_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_integration_certification_links_cert": {
          "name": "idx_integration_certification_links_cert",
          "columns": [
            {
              "expression": "certification_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "integration_certification_links_brand_integration_id_brand_integrations_id_fk": {
          "name": "integration_certification_links_brand_integration_id_brand_integrations_id_fk",
          "tableFrom": "integration_certification_links",
          "tableTo": "brand_integrations",
          "columnsFrom": ["brand_integration_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "integration_certification_links_certification_id_brand_certifications_id_fk": {
          "name": "integration_certification_links_certification_id_brand_certifications_id_fk",
          "tableFrom": "integration_certification_links",
          "tableTo": "brand_certifications",
          "columnsFrom": ["certification_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "integration_certification_links_select_for_brand_members": {
          "name": "integration_certification_links_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_certification_links_insert_by_brand_member": {
          "name": "integration_certification_links_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_certification_links_update_by_brand_member": {
          "name": "integration_certification_links_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_certification_links_delete_by_brand_member": {
          "name": "integration_certification_links_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.integration_eco_claim_links": {
      "name": "integration_eco_claim_links",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_integration_id": {
          "name": "brand_integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "eco_claim_id": {
          "name": "eco_claim_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "external_name": {
          "name": "external_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_synced_at": {
          "name": "last_synced_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "integration_eco_claim_links_integration_external_unq": {
          "name": "integration_eco_claim_links_integration_external_unq",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "integration_eco_claim_links_integration_claim_unq": {
          "name": "integration_eco_claim_links_integration_claim_unq",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "eco_claim_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_integration_eco_claim_links_claim": {
          "name": "idx_integration_eco_claim_links_claim",
          "columns": [
            {
              "expression": "eco_claim_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "integration_eco_claim_links_brand_integration_id_brand_integrations_id_fk": {
          "name": "integration_eco_claim_links_brand_integration_id_brand_integrations_id_fk",
          "tableFrom": "integration_eco_claim_links",
          "tableTo": "brand_integrations",
          "columnsFrom": ["brand_integration_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "integration_eco_claim_links_eco_claim_id_brand_eco_claims_id_fk": {
          "name": "integration_eco_claim_links_eco_claim_id_brand_eco_claims_id_fk",
          "tableFrom": "integration_eco_claim_links",
          "tableTo": "brand_eco_claims",
          "columnsFrom": ["eco_claim_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "integration_eco_claim_links_select_for_brand_members": {
          "name": "integration_eco_claim_links_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_eco_claim_links_insert_by_brand_member": {
          "name": "integration_eco_claim_links_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_eco_claim_links_update_by_brand_member": {
          "name": "integration_eco_claim_links_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_eco_claim_links_delete_by_brand_member": {
          "name": "integration_eco_claim_links_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.integration_facility_links": {
      "name": "integration_facility_links",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_integration_id": {
          "name": "brand_integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "facility_id": {
          "name": "facility_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "external_name": {
          "name": "external_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_synced_at": {
          "name": "last_synced_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "integration_facility_links_integration_external_unq": {
          "name": "integration_facility_links_integration_external_unq",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "integration_facility_links_integration_facility_unq": {
          "name": "integration_facility_links_integration_facility_unq",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "facility_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_integration_facility_links_facility": {
          "name": "idx_integration_facility_links_facility",
          "columns": [
            {
              "expression": "facility_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "integration_facility_links_brand_integration_id_brand_integrations_id_fk": {
          "name": "integration_facility_links_brand_integration_id_brand_integrations_id_fk",
          "tableFrom": "integration_facility_links",
          "tableTo": "brand_integrations",
          "columnsFrom": ["brand_integration_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "integration_facility_links_facility_id_brand_facilities_id_fk": {
          "name": "integration_facility_links_facility_id_brand_facilities_id_fk",
          "tableFrom": "integration_facility_links",
          "tableTo": "brand_facilities",
          "columnsFrom": ["facility_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "integration_facility_links_select_for_brand_members": {
          "name": "integration_facility_links_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_facility_links_insert_by_brand_member": {
          "name": "integration_facility_links_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_facility_links_update_by_brand_member": {
          "name": "integration_facility_links_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_facility_links_delete_by_brand_member": {
          "name": "integration_facility_links_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.integration_manufacturer_links": {
      "name": "integration_manufacturer_links",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_integration_id": {
          "name": "brand_integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "manufacturer_id": {
          "name": "manufacturer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "external_name": {
          "name": "external_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_synced_at": {
          "name": "last_synced_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "integration_manufacturer_links_integration_external_unq": {
          "name": "integration_manufacturer_links_integration_external_unq",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "integration_manufacturer_links_integration_mfr_unq": {
          "name": "integration_manufacturer_links_integration_mfr_unq",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "manufacturer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_integration_manufacturer_links_mfr": {
          "name": "idx_integration_manufacturer_links_mfr",
          "columns": [
            {
              "expression": "manufacturer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "integration_manufacturer_links_brand_integration_id_brand_integrations_id_fk": {
          "name": "integration_manufacturer_links_brand_integration_id_brand_integrations_id_fk",
          "tableFrom": "integration_manufacturer_links",
          "tableTo": "brand_integrations",
          "columnsFrom": ["brand_integration_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "integration_manufacturer_links_manufacturer_id_brand_manufacturers_id_fk": {
          "name": "integration_manufacturer_links_manufacturer_id_brand_manufacturers_id_fk",
          "tableFrom": "integration_manufacturer_links",
          "tableTo": "brand_manufacturers",
          "columnsFrom": ["manufacturer_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "integration_manufacturer_links_select_for_brand_members": {
          "name": "integration_manufacturer_links_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_manufacturer_links_insert_by_brand_member": {
          "name": "integration_manufacturer_links_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_manufacturer_links_update_by_brand_member": {
          "name": "integration_manufacturer_links_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_manufacturer_links_delete_by_brand_member": {
          "name": "integration_manufacturer_links_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.integration_material_links": {
      "name": "integration_material_links",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_integration_id": {
          "name": "brand_integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "material_id": {
          "name": "material_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "external_name": {
          "name": "external_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_synced_at": {
          "name": "last_synced_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "integration_material_links_integration_external_unq": {
          "name": "integration_material_links_integration_external_unq",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "integration_material_links_integration_material_unq": {
          "name": "integration_material_links_integration_material_unq",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "material_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_integration_material_links_material": {
          "name": "idx_integration_material_links_material",
          "columns": [
            {
              "expression": "material_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "integration_material_links_brand_integration_id_brand_integrations_id_fk": {
          "name": "integration_material_links_brand_integration_id_brand_integrations_id_fk",
          "tableFrom": "integration_material_links",
          "tableTo": "brand_integrations",
          "columnsFrom": ["brand_integration_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "integration_material_links_material_id_brand_materials_id_fk": {
          "name": "integration_material_links_material_id_brand_materials_id_fk",
          "tableFrom": "integration_material_links",
          "tableTo": "brand_materials",
          "columnsFrom": ["material_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "integration_material_links_select_for_brand_members": {
          "name": "integration_material_links_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_material_links_insert_by_brand_member": {
          "name": "integration_material_links_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_material_links_update_by_brand_member": {
          "name": "integration_material_links_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_material_links_delete_by_brand_member": {
          "name": "integration_material_links_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.integration_season_links": {
      "name": "integration_season_links",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_integration_id": {
          "name": "brand_integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "season_id": {
          "name": "season_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "external_name": {
          "name": "external_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_synced_at": {
          "name": "last_synced_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "integration_season_links_integration_external_unq": {
          "name": "integration_season_links_integration_external_unq",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "integration_season_links_integration_season_unq": {
          "name": "integration_season_links_integration_season_unq",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "season_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_integration_season_links_season": {
          "name": "idx_integration_season_links_season",
          "columns": [
            {
              "expression": "season_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "integration_season_links_brand_integration_id_brand_integrations_id_fk": {
          "name": "integration_season_links_brand_integration_id_brand_integrations_id_fk",
          "tableFrom": "integration_season_links",
          "tableTo": "brand_integrations",
          "columnsFrom": ["brand_integration_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "integration_season_links_season_id_brand_seasons_id_fk": {
          "name": "integration_season_links_season_id_brand_seasons_id_fk",
          "tableFrom": "integration_season_links",
          "tableTo": "brand_seasons",
          "columnsFrom": ["season_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "integration_season_links_select_for_brand_members": {
          "name": "integration_season_links_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_season_links_insert_by_brand_member": {
          "name": "integration_season_links_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_season_links_update_by_brand_member": {
          "name": "integration_season_links_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_season_links_delete_by_brand_member": {
          "name": "integration_season_links_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.integration_tag_links": {
      "name": "integration_tag_links",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_integration_id": {
          "name": "brand_integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tag_id": {
          "name": "tag_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "external_name": {
          "name": "external_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_synced_at": {
          "name": "last_synced_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "integration_tag_links_integration_external_unq": {
          "name": "integration_tag_links_integration_external_unq",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "integration_tag_links_integration_tag_unq": {
          "name": "integration_tag_links_integration_tag_unq",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "tag_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_integration_tag_links_tag": {
          "name": "idx_integration_tag_links_tag",
          "columns": [
            {
              "expression": "tag_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "integration_tag_links_brand_integration_id_brand_integrations_id_fk": {
          "name": "integration_tag_links_brand_integration_id_brand_integrations_id_fk",
          "tableFrom": "integration_tag_links",
          "tableTo": "brand_integrations",
          "columnsFrom": ["brand_integration_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "integration_tag_links_tag_id_brand_tags_id_fk": {
          "name": "integration_tag_links_tag_id_brand_tags_id_fk",
          "tableFrom": "integration_tag_links",
          "tableTo": "brand_tags",
          "columnsFrom": ["tag_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "integration_tag_links_select_for_brand_members": {
          "name": "integration_tag_links_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_tag_links_insert_by_brand_member": {
          "name": "integration_tag_links_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_tag_links_update_by_brand_member": {
          "name": "integration_tag_links_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        },
        "integration_tag_links_delete_by_brand_member": {
          "name": "integration_tag_links_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n      SELECT 1 FROM brand_integrations bi\n      WHERE bi.id = brand_integration_id\n      AND is_brand_member(bi.brand_id)\n    )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.integration_product_links": {
      "name": "integration_product_links",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_integration_id": {
          "name": "brand_integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "external_name": {
          "name": "external_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_synced_at": {
          "name": "last_synced_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_synced_hash": {
          "name": "last_synced_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_canonical": {
          "name": "is_canonical",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "integration_product_links_integration_external_unq": {
          "name": "integration_product_links_integration_external_unq",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "integration_product_links_canonical_unq": {
          "name": "integration_product_links_canonical_unq",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "is_canonical = true",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_integration_product_links_product": {
          "name": "idx_integration_product_links_product",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "integration_product_links_brand_integration_id_brand_integrations_id_fk": {
          "name": "integration_product_links_brand_integration_id_brand_integrations_id_fk",
          "tableFrom": "integration_product_links",
          "tableTo": "brand_integrations",
          "columnsFrom": ["brand_integration_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "integration_product_links_product_id_products_id_fk": {
          "name": "integration_product_links_product_id_products_id_fk",
          "tableFrom": "integration_product_links",
          "tableTo": "products",
          "columnsFrom": ["product_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "integration_product_links_select_for_brand_members": {
          "name": "integration_product_links_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM brand_integrations bi\n        WHERE bi.id = brand_integration_id\n        AND is_brand_member(bi.brand_id)\n      )"
        },
        "integration_product_links_insert_by_brand_member": {
          "name": "integration_product_links_insert_by_brand_member",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["authenticated", "service_role"],
          "withCheck": "EXISTS (\n        SELECT 1 FROM brand_integrations bi\n        WHERE bi.id = brand_integration_id\n        AND is_brand_member(bi.brand_id)\n      )"
        },
        "integration_product_links_update_by_brand_member": {
          "name": "integration_product_links_update_by_brand_member",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM brand_integrations bi\n        WHERE bi.id = brand_integration_id\n        AND is_brand_member(bi.brand_id)\n      )"
        },
        "integration_product_links_delete_by_brand_member": {
          "name": "integration_product_links_delete_by_brand_member",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM brand_integrations bi\n        WHERE bi.id = brand_integration_id\n        AND is_brand_member(bi.brand_id)\n      )"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.integration_variant_links": {
      "name": "integration_variant_links",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "brand_integration_id": {
          "name": "brand_integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "variant_id": {
          "name": "variant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "external_product_id": {
          "name": "external_product_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "external_sku": {
          "name": "external_sku",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "external_barcode": {
          "name": "external_barcode",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_synced_at": {
          "name": "last_synced_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_synced_hash": {
          "name": "last_synced_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "integration_variant_links_integration_external_unq": {
          "name": "integration_variant_links_integration_external_unq",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_integration_variant_links_variant": {
          "name": "idx_integration_variant_links_variant",
          "columns": [
            {
              "expression": "variant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_integration_variant_links_integration": {
          "name": "idx_integration_variant_links_integration",
          "columns": [
            {
              "expression": "brand_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "integration_variant_links_brand_integration_id_brand_integrations_id_fk": {
          "name": "integration_variant_links_brand_integration_id_brand_integrations_id_fk",
          "tableFrom": "integration_variant_links",
          "tableTo": "brand_integrations",
          "columnsFrom": ["brand_integration_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "integration_variant_links_variant_id_product_variants_id_fk": {
          "name": "integration_variant_links_variant_id_product_variants_id_fk",
          "tableFrom": "integration_variant_links",
          "tableTo": "product_variants",
          "columnsFrom": ["variant_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "integration_variant_links_select_for_brand_members": {
          "name": "integration_variant_links_select_for_brand_members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "EXISTS (\n        SELECT 1 FROM brand_integrations bi\n        WHERE bi.id = brand_integration_id\n        AND is_brand_member(bi.brand_id)\n      )"
        },
        "integration_variant_links_insert_by_service": {
          "name": "integration_variant_links_insert_by_service",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["service_role"],
          "withCheck": "true"
        },
        "integration_variant_links_update_by_service": {
          "name": "integration_variant_links_update_by_service",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["service_role"],
          "using": "true"
        },
        "integration_variant_links_delete_by_service": {
          "name": "integration_variant_links_delete_by_service",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["service_role"],
          "using": "true"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.taxonomy_categories": {
      "name": "taxonomy_categories",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "public_id": {
          "name": "public_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "parent_id": {
          "name": "parent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "categories_parent_name_unq": {
          "name": "categories_parent_name_unq",
          "columns": [
            {
              "expression": "parent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "categories_parent_id_idx": {
          "name": "categories_parent_id_idx",
          "columns": [
            {
              "expression": "parent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "taxonomy_categories_parent_id_taxonomy_categories_id_fk": {
          "name": "taxonomy_categories_parent_id_taxonomy_categories_id_fk",
          "tableFrom": "taxonomy_categories",
          "tableTo": "taxonomy_categories",
          "columnsFrom": ["parent_id"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "taxonomy_categories_public_id_unique": {
          "name": "taxonomy_categories_public_id_unique",
          "nullsNotDistinct": false,
          "columns": ["public_id"]
        }
      },
      "policies": {
        "categories_select_for_authenticated": {
          "name": "categories_select_for_authenticated",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "true"
        },
        "categories_modify_system_only": {
          "name": "categories_modify_system_only",
          "as": "RESTRICTIVE",
          "for": "ALL",
          "to": ["authenticated", "service_role"],
          "using": "false",
          "withCheck": "false"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.taxonomy_attributes": {
      "name": "taxonomy_attributes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "friendly_id": {
          "name": "friendly_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "public_id": {
          "name": "public_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "taxonomy_attributes_friendly_id_idx": {
          "name": "taxonomy_attributes_friendly_id_idx",
          "columns": [
            {
              "expression": "friendly_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "taxonomy_attributes_friendly_id_unique": {
          "name": "taxonomy_attributes_friendly_id_unique",
          "nullsNotDistinct": false,
          "columns": ["friendly_id"]
        },
        "taxonomy_attributes_public_id_unique": {
          "name": "taxonomy_attributes_public_id_unique",
          "nullsNotDistinct": false,
          "columns": ["public_id"]
        }
      },
      "policies": {
        "taxonomy_attributes_select_for_authenticated": {
          "name": "taxonomy_attributes_select_for_authenticated",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "true"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.taxonomy_values": {
      "name": "taxonomy_values",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "attribute_id": {
          "name": "attribute_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "friendly_id": {
          "name": "friendly_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "public_id": {
          "name": "public_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "public_attribute_id": {
          "name": "public_attribute_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "sort_order": {
          "name": "sort_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "taxonomy_values_attribute_id_idx": {
          "name": "taxonomy_values_attribute_id_idx",
          "columns": [
            {
              "expression": "attribute_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "taxonomy_values_friendly_id_idx": {
          "name": "taxonomy_values_friendly_id_idx",
          "columns": [
            {
              "expression": "friendly_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "taxonomy_values_attribute_id_taxonomy_attributes_id_fk": {
          "name": "taxonomy_values_attribute_id_taxonomy_attributes_id_fk",
          "tableFrom": "taxonomy_values",
          "tableTo": "taxonomy_attributes",
          "columnsFrom": ["attribute_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "taxonomy_values_friendly_id_unique": {
          "name": "taxonomy_values_friendly_id_unique",
          "nullsNotDistinct": false,
          "columns": ["friendly_id"]
        },
        "taxonomy_values_public_id_unique": {
          "name": "taxonomy_values_public_id_unique",
          "nullsNotDistinct": false,
          "columns": ["public_id"]
        }
      },
      "policies": {
        "taxonomy_values_select_for_authenticated": {
          "name": "taxonomy_values_select_for_authenticated",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "true"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.taxonomy_external_mappings": {
      "name": "taxonomy_external_mappings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "source_system": {
          "name": "source_system",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "source_taxonomy": {
          "name": "source_taxonomy",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "target_taxonomy": {
          "name": "target_taxonomy",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "version": {
          "name": "version",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "data": {
          "name": "data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "taxonomy_external_mappings_slug_unq": {
          "name": "taxonomy_external_mappings_slug_unq",
          "columns": [
            {
              "expression": "slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "taxonomy_external_mappings_source_idx": {
          "name": "taxonomy_external_mappings_source_idx",
          "columns": [
            {
              "expression": "source_system",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "source_taxonomy",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "taxonomy_external_mappings_select_for_authenticated": {
          "name": "taxonomy_external_mappings_select_for_authenticated",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["authenticated", "service_role"],
          "using": "true"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.user_role": {
      "name": "user_role",
      "schema": "public",
      "values": ["owner", "member"]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}
