---
title: user.get
description: Get the authenticated user's profile information
---

import { Callout } from 'nextra/components'

# user.get

Retrieves the authenticated user's profile information. This endpoint is the foundation for user context throughout the application.

## Endpoint

`user.get` (Query)

## Why This Endpoint Exists

Every application needs the current user's context. This endpoint fetches the authenticated user's profile from the database, providing essential information like their email, display name, avatar, and associated brand. It's used throughout the app to:
- Display user information in navigation/headers
- Determine the active brand context
- Pre-fill profile forms
- Check if profile setup is complete

The endpoint uses the session's user ID to fetch the profile, ensuring users can only access their own data.

## Input Parameters

None. Uses authenticated session context.

## Return Value

```typescript
interface UserProfile {
  id: string
  email: string
  full_name: string | null
  avatar_url: string | null
  brand_id: string | null
}

type ReturnValue = UserProfile | null
```

Returns `null` if user is authenticated but hasn't created an application profile yet.

## Examples

### Basic Usage

```typescript
const user = await trpc.user.get.query()

if (user) {
  console.log(`Welcome, ${user.full_name || user.email}`)
}
```

### React Component

```tsx
function UserProfileHeader() {
  const { data: user, isLoading } = trpc.user.get.useQuery()

  if (isLoading) return <Skeleton />
  if (!user) return <div>No profile found</div>

  return (
    <div className="flex items-center gap-3">
      {user.avatar_url && (
        <img src={user.avatar_url} alt={user.full_name || 'User'} className="w-10 h-10 rounded-full" />
      )}
      <div>
        <p className="font-semibold">{user.full_name || 'Unnamed User'}</p>
        <p className="text-sm text-gray-500">{user.email}</p>
      </div>
    </div>
  )
}
```

### Check Profile Completion

```typescript
function isProfileComplete(user: UserProfile | null): boolean {
  if (!user) return false
  return !!(user.full_name && user.avatar_url && user.brand_id)
}
```

## Response Examples

Success:
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "email": "user@example.com",
  "full_name": "Jane Smith",
  "avatar_url": "https://storage.example.com/avatars/user.jpg",
  "brand_id": "brand-123"
}
```

No profile:
```json
null
```

## Error Handling

### UNAUTHORIZED (401)

Session expired or user not authenticated.

```typescript
try {
  const user = await trpc.user.get.query()
} catch (error) {
  if (error.data?.code === 'UNAUTHORIZED') {
    window.location.href = '/login'
  }
}
```

### INTERNAL_SERVER_ERROR (500)

Database error or missing email.

```typescript
try {
  const user = await trpc.user.get.query()
} catch (error) {
  if (error.data?.code === 'INTERNAL_SERVER_ERROR') {
    console.error('Failed to load profile:', error.message)
  }
}
```

## Notes

<Callout type="warning">
Email fallback: If database email is null, uses session email. Throws error if both are null.
</Callout>

## Related Endpoints

- [user.update](/user/update) - Update user profile
- [user.delete](/user/delete) - Delete user account
- [composite.workflowInit](/composite/workflowInit) - Get user + brands in one call
